
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>PyTrx modules &#8212; PyTrx 1.1.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Links and Acknowledgements" href="Links.html" />
    <link rel="prev" title="PyTrx Examples" href="Examples.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Links.html" title="Links and Acknowledgements"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Examples.html" title="PyTrx Examples"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyTrx 1.1.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pytrx-modules">
<h1>PyTrx modules<a class="headerlink" href="#pytrx-modules" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-PyTrx.Area">
<span id="pytrx-area-module"></span><h2>PyTrx.Area module<a class="headerlink" href="#module-PyTrx.Area" title="Permalink to this headline">¶</a></h2>
<p>The Area module handles the functionality for obtaining areal measurements from 
oblique time-lapse imagery. Specifically, this module contains functions for:
(1) Performing automated and manual detection of areal extents in oblique 
imagery; and (2) Determining real-world surface areas from oblique imagery.</p>
<dl class="class">
<dt id="PyTrx.Area.Area">
<em class="property">class </em><code class="sig-prename descclassname">PyTrx.Area.</code><code class="sig-name descname">Area</code><span class="sig-paren">(</span><em class="sig-param">imageList</em>, <em class="sig-param">cameraenv</em>, <em class="sig-param">hmatrix</em>, <em class="sig-param">calibFlag=True</em>, <em class="sig-param">band='L'</em>, <em class="sig-param">equal=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Area.html#Area"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Area.Area" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Images.ImageSequence</span></code></p>
<p>A class for processing change in area (i.e. a lake or plume) through an 
image sequence, with methods to calculate extent change in an image plane 
(px) and real areal change via georectification.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imageList</strong> (<em>str/list</em>) – List of images, for the <a class="reference internal" href="#PyTrx.Images.ImageSequence" title="PyTrx.Images.ImageSequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.Images.ImageSequence</span></code></a> object</p></li>
<li><p><strong>cameraenv</strong> (<em>str</em>) – Camera environment parameters which can be read into the <a class="reference internal" href="#PyTrx.CamEnv.CamEnv" title="PyTrx.CamEnv.CamEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.CamEnv.CamEnv</span></code></a> object as a text file</p></li>
<li><p><strong>hmatrix</strong> (<em>arr</em>) – Homography matrix</p></li>
<li><p><strong>calibFlag</strong> (<em>bool</em>) – An indicator of whether images are calibrated, for the <a class="reference internal" href="#PyTrx.Images.ImageSequence" title="PyTrx.Images.ImageSequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.Images.ImageSequence</span></code></a> object</p></li>
<li><p><strong>band</strong> (<em>str</em><em>, </em><em>optional</em>) – String denoting the desired image band, default to ‘L’ (grayscale)</p></li>
<li><p><strong>equal</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag denoting whether histogram equalisation is applied to images (histogram equalisation is applied if True). Default to True.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="PyTrx.Area.Area.calcAutoAreas">
<code class="sig-name descname">calcAutoAreas</code><span class="sig-paren">(</span><em class="sig-param">colour=False</em>, <em class="sig-param">verify=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Area.html#Area.calcAutoAreas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Area.Area.calcAutoAreas" title="Permalink to this definition">¶</a></dt>
<dd><p>Detects areas of interest from a sequence of images, and returns 
pixel and xyz areas.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>colour</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag to denote whether colour range for detection should be defined for each image or only once, default to False</p></li>
<li><p><strong>verify</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag to denote whether detected polygons should be manually verified by user, default to False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>XYZ and UV area information</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Area.Area.calcManualAreas">
<code class="sig-name descname">calcManualAreas</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Area.html#Area.calcManualAreas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Area.Area.calcManualAreas" title="Permalink to this definition">¶</a></dt>
<dd><p>Manually define areas of interest in a sequence of images. User 
input is facilitated through an interactive plot to click around the 
area of interest</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>XYZ and UV area information</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Area.Area.setColourrange">
<code class="sig-name descname">setColourrange</code><span class="sig-paren">(</span><em class="sig-param">upper</em>, <em class="sig-param">lower</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Area.html#Area.setColourrange"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Area.Area.setColourrange" title="Permalink to this definition">¶</a></dt>
<dd><p>Manually define the RBG colour range that will be used to filter
the image/images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>upper</strong> (<em>int</em>) – Upper value of colour range</p></li>
<li><p><strong>lower</strong> (<em>int</em>) – Lower value of colour range</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Area.Area.setEnhance">
<code class="sig-name descname">setEnhance</code><span class="sig-paren">(</span><em class="sig-param">diff</em>, <em class="sig-param">phi</em>, <em class="sig-param">theta</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Area.html#Area.setEnhance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Area.Area.setEnhance" title="Permalink to this definition">¶</a></dt>
<dd><p>Set image enhancement parameters. Change brightness and contrast of 
image using phi and theta variables. Change phi and theta values 
accordingly. See enhanceImg function for detailed explanation of the 
parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>diff</strong> (<em>str</em>) – Inputted as either ‘light or ‘dark’, signifying the intensity of the image pixels. ‘light’ increases the intensity such that dark pixels become much brighter and bright pixels become slightly brighter. ‘dark’ decreases the intensity such that dark pixels become much darker and bright pixels become slightly darker.</p></li>
<li><p><strong>phi</strong> (<em>int</em>) – Defines the intensity of all pixel values</p></li>
<li><p><strong>theta</strong> (<em>int               .</em>) – Defines the number of “colours” in the image, e.g. 3 signifies that all the pixels will be grouped into one of three pixel values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Area.Area.setMax">
<code class="sig-name descname">setMax</code><span class="sig-paren">(</span><em class="sig-param">maxMaskPath</em>, <em class="sig-param">maxim</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Area.html#Area.setMax"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Area.Area.setMax" title="Permalink to this definition">¶</a></dt>
<dd><p>Set image in sequence which pictures the maximum extent of the area
of interest.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>maxMaskPath</strong> (<em>str</em>) – File path to mask with maximum extent</p></li>
<li><p><strong>maxim</strong> (<em>arr</em>) – Image with maximum extent</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Area.Area.setPXExt">
<code class="sig-name descname">setPXExt</code><span class="sig-paren">(</span><em class="sig-param">xmin</em>, <em class="sig-param">xmax</em>, <em class="sig-param">ymin</em>, <em class="sig-param">ymax</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Area.html#Area.setPXExt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Area.Area.setPXExt" title="Permalink to this definition">¶</a></dt>
<dd><p>Set plotting extent. Setting the plot extent will make it easier to 
define colour ranges and verify areas.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xmin</strong> (<em>int</em>) – X-axis minimum value.</p></li>
<li><p><strong>xmax</strong> (<em>int</em>) – X-axis maximum value.</p></li>
<li><p><strong>ymin</strong> (<em>int</em>) – Y-axis minimum value.</p></li>
<li><p><strong>ymax</strong> (<em>int</em>) – Y-axis maximum value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Area.Area.setThreshold">
<code class="sig-name descname">setThreshold</code><span class="sig-paren">(</span><em class="sig-param">number</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Area.html#Area.setThreshold"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Area.Area.setThreshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Set threshold for number of polgons kept from an image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>number</strong> (<em>int</em>) – Number denoting the number of detected polygons that will be retained</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Area.Area.verifyAreas">
<code class="sig-name descname">verifyAreas</code><span class="sig-paren">(</span><em class="sig-param">areas</em>, <em class="sig-param">invprojvars</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Area.html#Area.verifyAreas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Area.Area.verifyAreas" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to manually verify all polygons in images. Plots sequential
images with detected polygons and the user manually verifies them by 
clicking them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>area</strong> (<em>list</em>) – XYZ and UV area information</p></li>
<li><p><strong>invprojvars</strong> (<em>list</em>) – Inverse projection variables [X,Y,Z,uv0]</p></li>
<li><p><strong>verified</strong> (<em>list</em>) – Verified XYZ and UV area information</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="PyTrx.Area.calcAutoArea">
<code class="sig-prename descclassname">PyTrx.Area.</code><code class="sig-name descname">calcAutoArea</code><span class="sig-paren">(</span><em class="sig-param">img</em>, <em class="sig-param">imn</em>, <em class="sig-param">colourrange</em>, <em class="sig-param">hmatrix=None</em>, <em class="sig-param">threshold=None</em>, <em class="sig-param">invprojvars=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Area.html#calcAutoArea"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Area.calcAutoArea" title="Permalink to this definition">¶</a></dt>
<dd><p>Detects areas of interest from a given image, and returns pixel and xyz 
areas along with polygon coordinates. Detection is performed from the image 
using a predefined RBG colour range. The colour range is then used to 
extract pixels within that range using the OpenCV function inRange. If a 
threshold has been set (using the setThreshold function) then only nth 
polygons will be retained. XYZ areas and polygon coordinates are only 
calculated when a set of inverse projection variables are provided.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>arr</em>) – Image array</p></li>
<li><p><strong>imn</strong> (<em>str</em>) – Image name</p></li>
<li><p><strong>colourrange</strong> (<em>list</em>) – RBG colour range for areas to be detected from</p></li>
<li><p><strong>hmatrix</strong> (<em>arr</em>) – Homography matrix, default to None</p></li>
<li><p><strong>threshold</strong> (<em>int</em><em>, </em><em>optional</em>) – Threshold number of detected areas to retain, default to None</p></li>
<li><p><strong>invprojvars</strong> (<em>list</em><em>, </em><em>optional</em>) – Inverse projection variables [X,Y,Z,uv0], default to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Four list items containing 1) the sum of total detected areas (xyz), 2) XYZ coordinates of detected areas, 3) Sum of total detected areas (px), and 4) UV coordinates of detected areas</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Area.calcManualArea">
<code class="sig-prename descclassname">PyTrx.Area.</code><code class="sig-name descname">calcManualArea</code><span class="sig-paren">(</span><em class="sig-param">img</em>, <em class="sig-param">imn</em>, <em class="sig-param">hmatrix=None</em>, <em class="sig-param">pxplot=None</em>, <em class="sig-param">invprojvars=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Area.html#calcManualArea"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Area.calcManualArea" title="Permalink to this definition">¶</a></dt>
<dd><p>Manually define an area in a given image. User input is facilitated
through an interactive plot to click around the area of interest. XYZ areas
are calculated if a set of inverse projection variables are given.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>arr</em>) – Image array</p></li>
<li><p><strong>imn</strong> (<em>str</em>) – Image name</p></li>
<li><p><strong>hmatrix</strong> (<em>arr</em>) – Homography matrix, default to None</p></li>
<li><p><strong>pxplot</strong> (<em>list</em><em>, </em><em>optional</em>) – Plotting extent for manual area definition, default to None</p></li>
<li><p><strong>invprojvars</strong> (<em>list</em><em>, </em><em>optional</em>) – Inverse projection variables [X,Y,Z,uv0], default to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Four list items containing 1) the sum of total detected areas (xyz), 2) XYZ coordinates of detected areas, 3) Sum of total detected areas (px), and 4) UV coordinates of detected areas</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Area.defineColourrange">
<code class="sig-prename descclassname">PyTrx.Area.</code><code class="sig-name descname">defineColourrange</code><span class="sig-paren">(</span><em class="sig-param">img</em>, <em class="sig-param">imn</em>, <em class="sig-param">pxplot=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Area.html#defineColourrange"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Area.defineColourrange" title="Permalink to this definition">¶</a></dt>
<dd><p>Define colour range manually by clicking on the lightest and 
darkest regions of the target extent that will be defined. Plot interaction 
information: Left click to select, right click to undo selection, close the 
image window to continue, and the window automatically times out after two 
clicks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>arr</em>) – Image array</p></li>
<li><p><strong>imn</strong> (<em>str</em>) – Image name</p></li>
<li><p><strong>pxplot</strong> (<em>list</em><em>, </em><em>optional</em>) – Plotting extent for manual area definition, default to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List containing the upper and lower boundary for pixel detection</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Area.getOGRArea">
<code class="sig-prename descclassname">PyTrx.Area.</code><code class="sig-name descname">getOGRArea</code><span class="sig-paren">(</span><em class="sig-param">pts</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Area.html#getOGRArea"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Area.getOGRArea" title="Permalink to this definition">¶</a></dt>
<dd><p>Get real world OGR polygons (.shp) from xyz poly pts with real world 
points which are compatible with mapping software (e.g. ArcGIS).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pts</strong> (<em>arr</em>) – UV/XYZ coordinates of a given area shape</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of OGR geometry polygons</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-PyTrx.CamEnv">
<span id="pytrx-camenv-module"></span><h2>PyTrx.CamEnv module<a class="headerlink" href="#module-PyTrx.CamEnv" title="Permalink to this headline">¶</a></h2>
<p>The Camera Environment module contains the object-constructors and functions 
for: (1) Representing a camera model in three-dimensional space; and (2) 
Effective translation of measurements in an XY image plane to XYZ real-world 
coordinates. The projection and inverse transformation functions are based on 
those available in the ImGRAFT toolbox for Matlab. Translations from
ImGRAFT are noted in related script comments.</p>
<dl class="class">
<dt id="PyTrx.CamEnv.CamCalib">
<em class="property">class </em><code class="sig-prename descclassname">PyTrx.CamEnv.</code><code class="sig-name descname">CamCalib</code><span class="sig-paren">(</span><em class="sig-param">*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamCalib"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamCalib" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This base class models a standard camera calibration matrix as per 
OpenCV, MatLab and ImGRAFT. The class uses a standard pinhole camera model, 
drawing on the functions within OpenCV. A scene view is formed by 
projecting 3D points into the image plane using a perspective 
transformation.         
The camera intrinsic matrix is defined as a 3 x 3 array: [fx,0,0][s,fy,0]
[cx,cy,1], where fx and fy is the camera focal length (in pixel units) and 
cx and cy as the location of the image centre (in pixels too), s is the 
skew, and cx and cy are the image dimensions in pixels.        
In addition, the radial distortion and tangential distortion are 
represented as a series of coefficients. These distortions are introduced 
by discrepancies in the camera lens and between the lens and the camera 
sensor: 1) Radial Distortion Coefficients: k ([k1,k2,k3,k4,k5,k6]), between 
2 and 6 coefficients needed; and 2) Tangential Distortion Coefficients: 
p ([p1,p2])
The object can be initiated directly either as a list of three elements for 
each of the intrinsic, tangential and radial arrays, or by referencing a 
file (.mat or .txt) containing the calibration data in a pre-designated 
format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (<em>str</em>) – Either a calibration text file, a series of calibration text files, a list of raw parameters, or a set of calibration images (along with calibration chessboard dimensions)</p>
</dd>
</dl>
<dl class="method">
<dt id="PyTrx.CamEnv.CamCalib.checkMatrix">
<code class="sig-name descname">checkMatrix</code><span class="sig-paren">(</span><em class="sig-param">matrix</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamCalib.checkMatrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamCalib.checkMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to support the calibrate function. Checks and converts the 
intrinsic matrix to the correct format for calibration with opencv.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>matrix</strong> (<em>arr</em>) – Intrinsic camera matrix</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The object’s intrinsic matrix (checked), tangential distortion and radial distortion information</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.CamEnv.CamCalib.getCalibdata">
<code class="sig-name descname">getCalibdata</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamCalib.getCalibdata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamCalib.getCalibdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Return camera matrix, and tangential and radial distortion 
coefficients.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.CamEnv.CamCalib.getCamMatrix">
<code class="sig-name descname">getCamMatrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamCalib.getCamMatrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamCalib.getCamMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Return camera matrix.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.CamEnv.CamCalib.getCamMatrixCV2">
<code class="sig-name descname">getCamMatrixCV2</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamCalib.getCamMatrixCV2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamCalib.getCamMatrixCV2" title="Permalink to this definition">¶</a></dt>
<dd><p>Return camera matrix in a structure that is compatible with 
subsequent photogrammetric processing using OpenCV.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.CamEnv.CamCalib.getDistortCoeffsCV2">
<code class="sig-name descname">getDistortCoeffsCV2</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamCalib.getDistortCoeffsCV2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamCalib.getDistortCoeffsCV2" title="Permalink to this definition">¶</a></dt>
<dd><p>Return radial and tangential distortion coefficients.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.CamEnv.CamCalib.reportCalibData">
<code class="sig-name descname">reportCalibData</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamCalib.reportCalibData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamCalib.reportCalibData" title="Permalink to this definition">¶</a></dt>
<dd><p>Self reporter for Camera Calibration object data.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="PyTrx.CamEnv.CamEnv">
<em class="property">class </em><code class="sig-prename descclassname">PyTrx.CamEnv.</code><code class="sig-name descname">CamEnv</code><span class="sig-paren">(</span><em class="sig-param">envFile</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamEnv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamEnv" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#PyTrx.CamEnv.CamCalib" title="PyTrx.CamEnv.CamCalib"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.CamEnv.CamCalib</span></code></a></p>
<p>A class to represent the camera object, containing the intrinsic
matrix, distortion parameters and camera pose (position and direction).    
Also inherits from the <a class="reference internal" href="#PyTrx.CamEnv.CamCalib" title="PyTrx.CamEnv.CamCalib"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.CamEnv.CamCalib</span></code></a> object, representing 
the intrinsic camera information.
This object can be initialised either through an environment file (and
passed to the initialiser as a filepath), or with the set intput parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The reference name for the camera</p></li>
<li><p><strong>GCPpath</strong> (<em>str</em>) – The file path of the GCPs, for the GCPs object</p></li>
<li><p><strong>DEMpath</strong> (<em>str</em>) – The file path for the DEM, for the GCPs object</p></li>
<li><p><strong>imagePath</strong> (<em>str</em>) – The file path for the GCP reference image, for the GCPs object</p></li>
<li><p><strong>calibPath</strong> (<em>str</em>) – The file path for the calibration file. This can be either as a .mat Matlab file or a text file. The text file should be of the following tab delimited format: RadialDistortion [k1 k2 k3…k7], TangentialDistortion [p1 p2], IntrinsicMatrix [x y z][x y z][x y z], End</p></li>
<li><p><strong>coords</strong> (<em>list</em>) – The x,y,z coordinates of the camera location, as a list</p></li>
<li><p><strong>ypr</strong> (<em>list</em>) – The yaw, pitch and roll of the camera, as a list</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="PyTrx.CamEnv.CamEnv.dataFromFile">
<code class="sig-name descname">dataFromFile</code><span class="sig-paren">(</span><em class="sig-param">filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamEnv.dataFromFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamEnv.dataFromFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Read CamEnv data from .txt file containing keywords and filepaths
to associated data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Environment file path</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Camera environment information (name, GCP filepath, DEM filepath, image filepath, calibration file path, camera coordinates, camera pose (ypr) and DEM densification factor)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.CamEnv.CamEnv.getDEM">
<code class="sig-name descname">getDEM</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamEnv.getDEM"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamEnv.getDEM" title="Permalink to this definition">¶</a></dt>
<dd><p>Return DEM as <a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>DEM object</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.CamEnv.CamEnv.getRefImageSize">
<code class="sig-name descname">getRefImageSize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamEnv.getRefImageSize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamEnv.getRefImageSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the dimensions of the reference image.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Image size</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.CamEnv.CamEnv.optimiseCamEnv">
<code class="sig-name descname">optimiseCamEnv</code><span class="sig-paren">(</span><em class="sig-param">optimise</em>, <em class="sig-param">optmethod='trf'</em>, <em class="sig-param">show=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamEnv.optimiseCamEnv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamEnv.optimiseCamEnv" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimise projection variables in the camera environment. The precise 
parameters to optimise are defined by the optimise variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>optimise</strong> (<em>str</em>) – Parameters to optimise - ‘YPR’ (optimise camera pose only), ‘EXT’ (optimise external camera parameters), ‘INT’ (optimise internal camera parameters), or ‘ALL’ (optimise all projection parameters)</p></li>
<li><p><strong>optmethod</strong> (<em>str</em><em>, </em><em>optional</em>) – Optimisation method, default to ‘trf’</p></li>
<li><p><strong>show</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag to denote if optimisation output should be plotted, default to False</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.CamEnv.CamEnv.reportCamData">
<code class="sig-name descname">reportCamData</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamEnv.reportCamData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamEnv.reportCamData" title="Permalink to this definition">¶</a></dt>
<dd><p>Reporter for testing that the relevant data has been successfully 
imported. Testing for camera Environment name, camera location (xyz),
reference image, DEM, DEM densification, GCPs, yaw pitch roll, camera 
matrix, and distortion coefficients.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.CamEnv.CamEnv.showCalib">
<code class="sig-name descname">showCalib</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamEnv.showCalib"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamEnv.showCalib" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot corrected and uncorrected reference image.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.CamEnv.CamEnv.showGCPs">
<code class="sig-name descname">showGCPs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamEnv.showGCPs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamEnv.showGCPs" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot GCPs in image plane and DEM scene.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.CamEnv.CamEnv.showPrincipalPoint">
<code class="sig-name descname">showPrincipalPoint</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamEnv.showPrincipalPoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamEnv.showPrincipalPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot Principal Point on reference image.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.CamEnv.CamEnv.showResiduals">
<code class="sig-name descname">showResiduals</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#CamEnv.showResiduals"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.CamEnv.showResiduals" title="Permalink to this definition">¶</a></dt>
<dd><p>Show positions of xyz GCPs and projected GCPs, and residual 
differences between their positions. This can be used as a measure of
a error in the georectification of measurements.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="PyTrx.CamEnv.GCPs">
<em class="property">class </em><code class="sig-prename descclassname">PyTrx.CamEnv.</code><code class="sig-name descname">GCPs</code><span class="sig-paren">(</span><em class="sig-param">dem</em>, <em class="sig-param">GCPpath</em>, <em class="sig-param">imagePath</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#GCPs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.GCPs" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class representing the geography of the camera scene. Contains
ground control points, as the world and image points, the DEM data and 
extent, and the image the ground control points correspond to, as an 
Image object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dem</strong> (<em>str</em>) – The file path of the ASCII DEM</p></li>
<li><p><strong>GCPpath</strong> (<em>str</em>) – The file path of the GCP text file, with a header line, and tab delimited x, y, z world coordinates and xy image on each line</p></li>
<li><p><strong>imagePath</strong> (<em>str</em>) – The file path of the image the GCPs correspond to</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="PyTrx.CamEnv.GCPs.getDEM">
<code class="sig-name descname">getDEM</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#GCPs.getDEM"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.GCPs.getDEM" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the dem object.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.CamEnv.GCPs.getGCPs">
<code class="sig-name descname">getGCPs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#GCPs.getGCPs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.GCPs.getGCPs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the world and image GCPs.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.CamEnv.GCPs.getImage">
<code class="sig-name descname">getImage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#GCPs.getImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.GCPs.getImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the GCP reference image.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="PyTrx.CamEnv.calibrateImages">
<code class="sig-prename descclassname">PyTrx.CamEnv.</code><code class="sig-name descname">calibrateImages</code><span class="sig-paren">(</span><em class="sig-param">imageFiles</em>, <em class="sig-param">xy</em>, <em class="sig-param">refine=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#calibrateImages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.calibrateImages" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for calibrating a camera from a set of input calibration
images. Calibration is performed using OpenCV’s chessboard calibration 
functions. Input images (imageFile) need to be of a chessboard with 
regular dimensions and a known number of corner features (xy).   
Please note that OpenCV’s calibrateCamera function is incompatible 
between different versions of OpenCV. Included here is the function
for version 3. Please see OpenCV’s documentation for older versions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imageFiles</strong> (<em>list</em>) – List of image file names</p></li>
<li><p><strong>xy</strong> (<em>list</em><em>)</em>) – Chessboard corner dimensions [rows, columns]</p></li>
<li><p><strong>refine</strong> (<em>int</em><em>, </em><em>optional</em>) – OpenCV camera model refinement method - cv2.CALIB_FIX_PRINCIPAL_POINT (fix principal point), cv2.CALIB_FIX_ASPECT_RATIO (Fix aspect ratio), cv2.CALIB_FIX_FOCAL_LENGTH (Fix focal length), cv2.CALIB_FIX_INTRINSIC (Fix camera model), cv2.CALIB_FIX_K1…6 (Fix radial coefficient 1-6), cv2.CALIB_FIX_TANGENT_DIST (Fix tangential coefficients), cv2.CALIB_USE_INTRINSIC_GUESS (Use initial intrinsic values), cv2.CALIB_ZERO_TANGENT_DIST (Set tangential distortion coefficients to zero), cv2.CALIB_RATIONAL_MODEL (Calculate radial distortion coefficients k4, k5, and k6). Default to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list containing the camera intrinsic matrix (arr), and tangential (arr) and radial distortion coefficents (arr), and the Camera calibration error (int)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr/int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.CamEnv.computeResidualsUV">
<code class="sig-prename descclassname">PyTrx.CamEnv.</code><code class="sig-name descname">computeResidualsUV</code><span class="sig-paren">(</span><em class="sig-param">params</em>, <em class="sig-param">stable</em>, <em class="sig-param">GCPxyz</em>, <em class="sig-param">GCPuv</em>, <em class="sig-param">refimg</em>, <em class="sig-param">optimise='YPR'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#computeResidualsUV"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.computeResidualsUV" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for computing the pixel difference between GCP image points
and GCP projected XYZ points. This function is used in the optimisation 
function (optimiseCamera), with parameters for optimising defined in the
first variable and stable parameters defined in the second. If no 
optimisable parameters are given and the optimise flag is set to None then 
residuals are computed for the original parameters (i.e. no optimisation).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<em>arr</em>) – Optimisable parameters, given as a 1-D array of shape (m, )</p></li>
<li><p><strong>stable</strong> (<em>list</em>) – Stable parameters that will not be optimised</p></li>
<li><p><strong>GCPxyz</strong> (<em>arr</em>) – GCPs in scene space (x,y,z)</p></li>
<li><p><strong>GCPuv</strong> (<em>arr</em>) – GCPs in image space (u,v)</p></li>
<li><p><strong>refimg</strong> (<a class="reference internal" href="#PyTrx.Images.CamImage" title="PyTrx.Images.CamImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.Images.CamImage</span></code></a>/str/arr) – Reference image, given as a CamImage object, file path string, or image array</p></li>
<li><p><strong>optimise</strong> (<em>str</em>) – Flag denoting which variables will be optimised: YPR (camera pose only), INT (internal camera parameters), EXT (external camera parameters), LOC (all parameters except camera location), or ALL (all projection parameters)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Pixel difference between UV and projected XYZ position of each GCP</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.CamEnv.computeResidualsXYZ">
<code class="sig-prename descclassname">PyTrx.CamEnv.</code><code class="sig-name descname">computeResidualsXYZ</code><span class="sig-paren">(</span><em class="sig-param">invprojvars</em>, <em class="sig-param">GCPxyz</em>, <em class="sig-param">GCPuv</em>, <em class="sig-param">dem</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#computeResidualsXYZ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.computeResidualsXYZ" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for computing the pixel difference between GCP image points
and GCP projected XYZ points. This function is used in the optimisation 
function (optimiseCamera), with parameters for optimising defined in the
first variable and stable parameters defined in the second. If no 
optimisable parameters are given and the optimise flag is set to None then 
residuals are computed for the original parameters (i.e. no optimisation).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<em>arr</em>) – Optimisable parameters, given as a 1-D array of shape (m, )</p></li>
<li><p><strong>stable</strong> (<em>list</em>) – Stable parameters that will not be optimised</p></li>
<li><p><strong>GCPxyz</strong> (<em>arr</em>) – GCPs in scene space (x,y,z)</p></li>
<li><p><strong>GCPuv</strong> (<em>arr</em>) – GCPs in image space (u,v)</p></li>
<li><p><strong>refimg</strong> (<a class="reference internal" href="#PyTrx.Images.CamImage" title="PyTrx.Images.CamImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.Images.CamImage</span></code></a>/str/arr) – Reference image, given as a CamImage object, file path string, or image array</p></li>
<li><p><strong>optimise</strong> (<em>str</em>) – Flag denoting which variables will be optimised: YPR (camera pose only), INT (internal camera parameters), EXT (external camera parameters), LOC (all parameters except camera location), or ALL (all projection parameters)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array denoting pixel difference between UV and projected XYZ position of each GCP</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.CamEnv.constructDEM">
<code class="sig-prename descclassname">PyTrx.CamEnv.</code><code class="sig-name descname">constructDEM</code><span class="sig-paren">(</span><em class="sig-param">dempath</em>, <em class="sig-param">densefactor</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#constructDEM"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.constructDEM" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct DEM from a given file path and densification factor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dempath</strong> (<em>str</em>) – DEM filepath</p></li>
<li><p><strong>densefactor</strong> (<em>int</em>) – Densification factor</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.CamEnv.getRotation">
<code class="sig-prename descclassname">PyTrx.CamEnv.</code><code class="sig-name descname">getRotation</code><span class="sig-paren">(</span><em class="sig-param">camDirection</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#getRotation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.getRotation" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates camera rotation matrix calculated from view 
direction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>camDirection</strong> (<em>arr</em>) – Camera pose (yaw,pitch,roll)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Rotation matrix as array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.CamEnv.optimiseCamera">
<code class="sig-prename descclassname">PyTrx.CamEnv.</code><code class="sig-name descname">optimiseCamera</code><span class="sig-paren">(</span><em class="sig-param">optimise</em>, <em class="sig-param">projvars</em>, <em class="sig-param">GCPxyz</em>, <em class="sig-param">GCPuv</em>, <em class="sig-param">optmethod='trf'</em>, <em class="sig-param">show=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#optimiseCamera"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.optimiseCamera" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimise camera parameters using the pixel differences between a set
of image GCPs and projected XYZ GCPs. The optimisation routine adopts the
least_square function in scipy’s optimize tools, using either the Trust 
Region Reflective algorithm, the dogleg algorithm or the 
Levenberg-Marquardt algorithm to refine a set group of projection 
parameters - camera pose only, the internal camera parameters (i.e. radial 
distortion, tangential distortion, focal length, principal point), the 
external camera parameters (i.e. camera location, camera pose), or all 
projection parameters (i.e. camera location, camera pose, radial 
distortion, tangential distortion, focal length, principal point).    
The Trust Region Reflective algorithm is generally a robust method, ideal 
for solving many variables (default). The Dogleg algorithm is ideal for 
solving few variables. The Levenberg-Margquardt algorithm is the most 
efficient method, ideal for solving few variables.
Pixel differences between a set of image GCPs and projected XYZ GCPs are
calculated and refined within the optimisation function, performing 
iterations until an optimum solution is reached. A new set of optimised 
projection parameters are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>optimise</strong> (<em>str</em>) – Flag denoting which variables will be optimised: YPR (camera pose only), INT (internal camera parameters), EXT (external camera parameters), LOC (all parameters except camera location), or ALL (all projection parameters)</p></li>
<li><p><strong>projvars</strong> – Projection parameters [camera location, camera pose, radial distortion, tangential distortion, focal length, principal point, reference image]</p></li>
<li><p><strong>GCPuv</strong> (<em>arr</em>) – UV positions for GCPs, as shape (m, 2)</p></li>
<li><p><strong>optmethod</strong> (<em>str</em>) – Optimisation method: ‘trf’ (Trust Region Reflective algorithm), ‘dogbox’ (dogleg algorithm), or ‘lm’ (Levenberg-Marquardt algorithm)</p></li>
<li><p><strong>show</strong> (<em>bool                                           .</em>) – Flag denoting whether plot of residuals should be shown</p></li>
</ul>
</dd>
<dt class="field-even">Typeprojvars</dt>
<dd class="field-even"><p>list</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list containing the optimised projection parameters. If optimisation fails then None is returned</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.CamEnv.projectUV">
<code class="sig-prename descclassname">PyTrx.CamEnv.</code><code class="sig-name descname">projectUV</code><span class="sig-paren">(</span><em class="sig-param">uv</em>, <em class="sig-param">invprojvars</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#projectUV"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.projectUV" title="Permalink to this definition">¶</a></dt>
<dd><p>Inverse project image coordinates (uv) to xyz world coordinates
using inverse projection variables (set using setProjection function).         
This function is primarily adopted from the ImGRAFT projection function 
found in camera.m: uv,depth,inframe=cam.project(xyz)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uv</strong> (<em>arr</em>) – Pixel coordinates in image</p></li>
<li><p><strong>invprojvars</strong> (<em>list</em>) – Inverse projection variables [X,Y,Z,uv0]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>World coordinates</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.CamEnv.projectXYZ">
<code class="sig-prename descclassname">PyTrx.CamEnv.</code><code class="sig-name descname">projectXYZ</code><span class="sig-paren">(</span><em class="sig-param">camloc</em>, <em class="sig-param">camdirection</em>, <em class="sig-param">radial</em>, <em class="sig-param">tangen</em>, <em class="sig-param">foclen</em>, <em class="sig-param">camcen</em>, <em class="sig-param">refimg</em>, <em class="sig-param">xyz</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#projectXYZ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.projectXYZ" title="Permalink to this definition">¶</a></dt>
<dd><p>Project the xyz world coordinates into the corresponding image 
coordinates (uv). This is primarily executed using the ImGRAFT projection 
function found in camera.m: uv,depth,inframe=cam.project(xyz)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>camloc</strong> (<em>arr</em>) – Camera location [X,Y,Z]</p></li>
<li><p><strong>camdirection</strong> (<em>arr</em>) – Camera pose (yaw, pitch, roll)</p></li>
<li><p><strong>radial</strong> (<em>arr</em>) – Radial distortion coefficients</p></li>
<li><p><strong>tangen</strong> (<em>arr</em>) – Tangential distortion coefficients</p></li>
<li><p><strong>foclen</strong> (<em>arr</em>) – Camera focal length</p></li>
<li><p><strong>camcen</strong> (<em>arr</em>) – Camera principal point</p></li>
<li><p><strong>refimg</strong> (<em>arr</em>) – Reference image (function only uses the image dimensions)</p></li>
<li><p><strong>xyz</strong> (<em>arr</em>) – world coordinates</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Pixel coordinates in image (arr), view depth (int), and a Boolean vector containing whether each projected 3D point is inside the frame</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr/int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.CamEnv.setProjection">
<code class="sig-prename descclassname">PyTrx.CamEnv.</code><code class="sig-name descname">setProjection</code><span class="sig-paren">(</span><em class="sig-param">dem</em>, <em class="sig-param">camloc</em>, <em class="sig-param">camdir</em>, <em class="sig-param">radial</em>, <em class="sig-param">tangen</em>, <em class="sig-param">foclen</em>, <em class="sig-param">camcen</em>, <em class="sig-param">refimg</em>, <em class="sig-param">viewshed=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/CamEnv.html#setProjection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.CamEnv.setProjection" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the inverse projection variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dem</strong> (<a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a>) – DEM object</p></li>
<li><p><strong>camloc</strong> (<em>arr</em>) – Camera location (X,Y,Z)</p></li>
<li><p><strong>camdir</strong> (<em>arr</em>) – Camera pose [yaw, pitch, roll]</p></li>
<li><p><strong>radial</strong> (<em>arr</em>) – Radial distortion coefficients</p></li>
<li><p><strong>tangen</strong> (<em>arr</em>) – Tangential distortion coefficients</p></li>
<li><p><strong>foclen</strong> (<em>arr</em>) – Camera focal length</p></li>
<li><p><strong>camcen</strong> (<em>arr</em>) – Camera principal point</p></li>
<li><p><strong>refimg</strong> (<em>arr</em>) – Reference image (function only uses the image dimensions)</p></li>
<li><p><strong>viewshed</strong> (<em>bool</em>) – Flag to denote if viewshed from camera should be determined before projection</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Inverse projection coefficients [X,Y,Z,uv0]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-PyTrx.DEM">
<span id="pytrx-dem-module"></span><h2>PyTrx.DEM module<a class="headerlink" href="#module-PyTrx.DEM" title="Permalink to this headline">¶</a></h2>
<p>The DEM module contains functionality for handling DEM data and implementing
this data into the <a class="reference internal" href="#PyTrx.CamEnv.CamEnv" title="PyTrx.CamEnv.CamEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.CamEnv.CamEnv</span></code></a> object class.</p>
<dl class="function">
<dt id="PyTrx.DEM.DEM_FromMat">
<code class="sig-prename descclassname">PyTrx.DEM.</code><code class="sig-name descname">DEM_FromMat</code><span class="sig-paren">(</span><em class="sig-param">matfile</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#DEM_FromMat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.DEM_FromMat" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for loading a DEM array from a Matlab (.mat) file containing
separate X, Y, Z matrices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>matfile</strong> (<em>str</em>) – DEM .mat filepath</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A DEM object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.DEM.DEM_FromTiff">
<code class="sig-prename descclassname">PyTrx.DEM.</code><code class="sig-name descname">DEM_FromTiff</code><span class="sig-paren">(</span><em class="sig-param">tiffFile</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#DEM_FromTiff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.DEM_FromTiff" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for loading a DEM array from a .tiff file containing
raster-formatted data. The tiff data importing is handled by GDAL.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tiffFile</strong> (<em>str</em>) – DEM .tif filepath</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A DEM object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="PyTrx.DEM.ExplicitRaster">
<em class="property">class </em><code class="sig-prename descclassname">PyTrx.DEM.</code><code class="sig-name descname">ExplicitRaster</code><span class="sig-paren">(</span><em class="sig-param">X</em>, <em class="sig-param">Y</em>, <em class="sig-param">Z</em>, <em class="sig-param">nodata=nan</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#ExplicitRaster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.ExplicitRaster" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class to represent a numeric Raster with explicit XY cell referencing
in each grid cell.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>arr</em>) – X data</p></li>
<li><p><strong>Y</strong> (<em>arr</em>) – Y data</p></li>
<li><p><strong>Z</strong> (<em>arr</em>) – Z data</p></li>
<li><p><strong>nodata</strong> (<em>int</em><em>, </em><em>optional</em>) – Condition for NaN data values, default to ‘nan’</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="PyTrx.DEM.ExplicitRaster.densify">
<code class="sig-name descname">densify</code><span class="sig-paren">(</span><em class="sig-param">densefac=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#ExplicitRaster.densify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.ExplicitRaster.densify" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to densify the DEM array by a given densification factor.
The array is multiplied by the given densification factor and then
subsequently values are interpolated using the SciPy function 
RectBivariateSpline. The densification factor is set to 2 by default,
meaning that the size of the DEM array is doubled.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>densefac</strong> (<em>int</em>) – Densification factor</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Densified DEM</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.DEM.ExplicitRaster.getCols">
<code class="sig-name descname">getCols</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#ExplicitRaster.getCols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.ExplicitRaster.getCols" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of columns in the DEM data array.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>DEM column count</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.DEM.ExplicitRaster.getData">
<code class="sig-name descname">getData</code><span class="sig-paren">(</span><em class="sig-param">dim=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#ExplicitRaster.getData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.ExplicitRaster.getData" title="Permalink to this definition">¶</a></dt>
<dd><p>Return DEM data. XYZ dimensions can be individually called with the
dim input variable (integer: 0, 1, or 2).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dim</strong> (<em>int</em>) – Dimension to retrieve (0, 1, or 2), default to None</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DEM dimension as array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.DEM.ExplicitRaster.getExtent">
<code class="sig-name descname">getExtent</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#ExplicitRaster.getExtent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.ExplicitRaster.getExtent" title="Permalink to this definition">¶</a></dt>
<dd><p>Return DEM extent.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>DEM extent</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.DEM.ExplicitRaster.getNoData">
<code class="sig-name descname">getNoData</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#ExplicitRaster.getNoData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.ExplicitRaster.getNoData" title="Permalink to this definition">¶</a></dt>
<dd><p>Return fill value for no data in DEM array.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>DEM nan fill value</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.DEM.ExplicitRaster.getRows">
<code class="sig-name descname">getRows</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#ExplicitRaster.getRows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.ExplicitRaster.getRows" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of rows in the DEM data array.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>DEM row count</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.DEM.ExplicitRaster.getShape">
<code class="sig-name descname">getShape</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#ExplicitRaster.getShape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.ExplicitRaster.getShape" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the shape of the DEM data array.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>DEM shape</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.DEM.ExplicitRaster.getZ">
<code class="sig-name descname">getZ</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#ExplicitRaster.getZ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.ExplicitRaster.getZ" title="Permalink to this definition">¶</a></dt>
<dd><p>Return height (Z) data of DEM.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>DEM Z values</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.DEM.ExplicitRaster.getZcoord">
<code class="sig-name descname">getZcoord</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#ExplicitRaster.getZcoord"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.ExplicitRaster.getZcoord" title="Permalink to this definition">¶</a></dt>
<dd><p>Return height (Z) at a given XY coordinate in DEM.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>int</em>) – X coordinate</p></li>
<li><p><strong>y</strong> (<em>int</em>) – Y coordinate</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DEM Z value for given coordinate</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.DEM.ExplicitRaster.reportDEM">
<code class="sig-name descname">reportDEM</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#ExplicitRaster.reportDEM"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.ExplicitRaster.reportDEM" title="Permalink to this definition">¶</a></dt>
<dd><p>Self reporter for DEM class object. Returns the number of rows and
columns in the array, how NaN values in the array are filled, and the
data extent coordinates.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.DEM.ExplicitRaster.subset">
<code class="sig-name descname">subset</code><span class="sig-paren">(</span><em class="sig-param">cmin</em>, <em class="sig-param">cmax</em>, <em class="sig-param">rmin</em>, <em class="sig-param">rmax</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#ExplicitRaster.subset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.ExplicitRaster.subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a specified subset of the DEM array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmin</strong> (<em>int</em>) – Column minimum extent</p></li>
<li><p><strong>cmax</strong> (<em>int</em>) – Column maximum extent</p></li>
<li><p><strong>rmin</strong> (<em>int</em>) – Row minimum extent</p></li>
<li><p><strong>rmax</strong> (<em>int</em>) – Row maximum extent</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Subset of DEM</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="PyTrx.DEM.load_DEM">
<code class="sig-prename descclassname">PyTrx.DEM.</code><code class="sig-name descname">load_DEM</code><span class="sig-paren">(</span><em class="sig-param">demfile</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#load_DEM"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.load_DEM" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for loading DEM data from different file types, which is 
automatically detected. Recognised file types: .mat and .tif.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>demfile</strong> (<em>str</em>) – DEM filepath</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A DEM object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.DEM.voxelviewshed">
<code class="sig-prename descclassname">PyTrx.DEM.</code><code class="sig-name descname">voxelviewshed</code><span class="sig-paren">(</span><em class="sig-param">dem</em>, <em class="sig-param">viewpoint</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/DEM.html#voxelviewshed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.DEM.voxelviewshed" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a viewshed over a DEM from a given viewpoint in the DEM scene.
This function is based on the viewshed function (voxelviewshed.m) available 
in ImGRAFT. The ImGRAFT voxelviewshed.m script is available at:
<a class="reference external" href="http://github.com/grinsted/ImGRAFT/blob/master/voxelviewshed.m">http://github.com/grinsted/ImGRAFT/blob/master/voxelviewshed.m</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dem</strong> (<a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a>) – A DEM object</p></li>
<li><p><strong>viewpoint</strong> (<em>list</em>) – 3-element vector specifying the viewpoint</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Boolean visibility matrix (which is the same size as dem)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-PyTrx.FileHandler">
<span id="pytrx-filehandler-module"></span><h2>PyTrx.FileHandler module<a class="headerlink" href="#module-PyTrx.FileHandler" title="Permalink to this headline">¶</a></h2>
<p>Th FileHandler module contains all the functions called by a PyTrx object to 
load and export data.</p>
<dl class="function">
<dt id="PyTrx.FileHandler.checkMatrix">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">checkMatrix</code><span class="sig-paren">(</span><em class="sig-param">matrix</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#checkMatrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.checkMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to support the calibrate function. Checks and converts the 
intrinsic matrix to the correct format for calibration with OpenCV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>matrix</strong> (<em>arr</em>) – Inputted matrix for checking</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Validated matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.importAreaData">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">importAreaData</code><span class="sig-paren">(</span><em class="sig-param">xyzfile</em>, <em class="sig-param">pxfile</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#importAreaData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.importAreaData" title="Permalink to this definition">¶</a></dt>
<dd><p>Import xyz and px data from text files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xyzfile</strong> (<em>str</em>) – File directory to xyz coordinates</p></li>
<li><p><strong>pxfile</strong> (<em>str</em>) – File directory to uv coordinates</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Coordinates and areas of detected areas</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.importAreaFile">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">importAreaFile</code><span class="sig-paren">(</span><em class="sig-param">fname</em>, <em class="sig-param">dimension</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#importAreaFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.importAreaFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Import pixel polygon data from text file and compute pixel extents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – Path to the text file containing the UV coordinate data</p></li>
<li><p><strong>dimension</strong> (<em>int</em>) – Integer denoting the number of dimensions in coordinates</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Two lists, containing the UV coordinates for polygons and the pixel areas for polygons</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.importLineData">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">importLineData</code><span class="sig-paren">(</span><em class="sig-param">xyzfile</em>, <em class="sig-param">pxfile</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#importLineData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.importLineData" title="Permalink to this definition">¶</a></dt>
<dd><p>Import xyz and px data from text files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xyzfile</strong> (<em>str</em>) – File directory to xyz coordinates</p></li>
<li><p><strong>pxfile</strong> (<em>str</em>) – File directory to uv coordinates</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Coordinates and lengths of detected lines</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.importLineFile">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">importLineFile</code><span class="sig-paren">(</span><em class="sig-param">fname</em>, <em class="sig-param">dimension</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#importLineFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.importLineFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Import XYZ line data from text file and compute line lengths.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – Path to the text file containing the XYZ coordinate data</p></li>
<li><p><strong>dimension</strong> (<em>int</em>) – Number of dimensions in point coordinates i.e. 2 or 3</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List containing line coordinates and lengths</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.lineSearch">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">lineSearch</code><span class="sig-paren">(</span><em class="sig-param">lineList</em>, <em class="sig-param">search</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#lineSearch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.lineSearch" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to supplement the readCalib function. Given an input parameter 
to search within the file, this will return the line numbers of the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lineList</strong> (<em>list</em>) – List of strings within a file line</p></li>
<li><p><strong>search</strong> (<em>str</em>) – Target keyword to search for</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Line numbers with keyword match</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.readCalib">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">readCalib</code><span class="sig-paren">(</span><em class="sig-param">fileName</em>, <em class="sig-param">paramList</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#readCalib"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.readCalib" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to find camera calibrations from a file given a list or 
Matlab file containing the required parameters. Returns the parameters as a
dictionary object. Compatible file structures: 1) .txt file 
(“RadialDistortion [k1,k2,k3…k8], TangentialDistortion [p1,p2],
IntrinsicMatrix [fx 0. 0.][s fy 0.][cx cy 1] End”); 2) .mat file
(Camera calibration file output from the Matlab Camera Calibration App 
(available in the Computer Vision Systems toolbox).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fileName</strong> (<em>str</em>) – File directory for calibration file</p></li>
<li><p><strong>paramList</strong> (<em>list</em>) – List of strings denoting keywords to look for in calibration file</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Calibration parameters denoted by keywords</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.readGCPs">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">readGCPs</code><span class="sig-paren">(</span><em class="sig-param">fileName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#readGCPs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.readGCPs" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to read ground control points from a .txt file. The data in the
file is referenced to under a header line. Data is appended by skipping the
header line and finding the world and image coordinates from each line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fileName</strong> (<em>str</em>) – File path directory for GCP file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Two arrays containing the GCPs in xyz coordinates, and the GCPs in image coordinates</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.readImg">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">readImg</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">band='L'</em>, <em class="sig-param">equal=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#readImg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.readImg" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to prepare an image by opening, equalising, converting to 
either grayscale or a specified band, then returning a copy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – Image file path directory</p></li>
<li><p><strong>band</strong> (<em>str</em>) – Desired band output - ‘R’: red band; ‘B’: blue band; ‘G’: green band; ‘L’: grayscale (default).</p></li>
<li><p><strong>equal</strong> (<em>bool</em>) – Flag to denote if histogram equalisation should be applied, defaults to True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Image array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.readMask">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">readMask</code><span class="sig-paren">(</span><em class="sig-param">img</em>, <em class="sig-param">writeMask=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#readMask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.readMask" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to create a mask for point seeding using PIL to rasterize 
polygon. The mask is manually defined by the user using the pyplot ginput 
function. This subsequently returns the manually defined area as a .jpg 
mask. The writeMask file path is used to either open the existing mask at 
that path or to write the generated mask to this path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>arr</em>) – Image to define mask in</p></li>
<li><p><strong>writeMask</strong> (<em>str</em><em>, </em><em>optional</em>) – File destination that mask output is written to, default to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array defining the image mask</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.readMatrixDistortion">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">readMatrixDistortion</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#readMatrixDistortion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.readMatrixDistortion" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to support the calibrate function. Returns the 
intrinsic matrix and distortion parameters required for calibration from a
given file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Directory of calibration file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Three camera matrix parameters: 1) the intrinsic matrix as a 3x3 array, including focal length, principal point, and skew (arr); 2) Tangential distortion values (p1, p2) (arr); and 3) Radial distortion values (k1, k2… k6)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.returnData">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">returnData</code><span class="sig-paren">(</span><em class="sig-param">lines</em>, <em class="sig-param">data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#returnData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.returnData" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to supplement the importCalibration function. Given the line 
numbers of the parameter data (the ouput of the lineSearch function), this 
will return the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines</strong> (<em>list</em>) – Given line numbers to extract data from</p></li>
<li><p><strong>data</strong> (<em>list</em>) – Raw line data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Extracted data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.writeAreaCoords">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">writeAreaCoords</code><span class="sig-paren">(</span><em class="sig-param">pxpts</em>, <em class="sig-param">xyzpts</em>, <em class="sig-param">imn</em>, <em class="sig-param">pxdestination</em>, <em class="sig-param">xyzdestination</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#writeAreaCoords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.writeAreaCoords" title="Permalink to this definition">¶</a></dt>
<dd><p>Write UV and XYZ area coordinates to text files. These file types are 
compatible with the importing tools (importAreaPX, importAreaXYZ).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xyzarea</strong> (<em>list</em>) – XYZ areas</p></li>
<li><p><strong>xyzpts</strong> (<em>list</em>) – XYZ coordinates</p></li>
<li><p><strong>imn</strong> (<em>list</em>) – Image names</p></li>
<li><p><strong>pxdestination</strong> (<em>str</em>) – File directory where UV coordinates will be written to</p></li>
<li><p><strong>xyzdestination</strong> (<em>str</em>) – File directory where XYZ coordinates will be written to</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.writeAreaFile">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">writeAreaFile</code><span class="sig-paren">(</span><em class="sig-param">pxareas</em>, <em class="sig-param">xyzareas</em>, <em class="sig-param">imn</em>, <em class="sig-param">destination</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#writeAreaFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.writeAreaFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Write UV and XYZ areas to csv file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pxarea</strong> (<em>list</em>) – Pixel extents</p></li>
<li><p><strong>xyzarea</strong> (<em>list</em>) – XYZ areas</p></li>
<li><p><strong>imn</strong> (<em>list</em>) – Image names</p></li>
<li><p><strong>destination</strong> (<em>str</em>) – File directory where csv file will be written to</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.writeAreaSHP">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">writeAreaSHP</code><span class="sig-paren">(</span><em class="sig-param">xyzpts</em>, <em class="sig-param">imn</em>, <em class="sig-param">fileDirectory</em>, <em class="sig-param">projection=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#writeAreaSHP"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.writeAreaSHP" title="Permalink to this definition">¶</a></dt>
<dd><p>Write OGR real polygon areas (from ALL images) to file in a .shp
file type that is compatible with ESRI mapping software.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xyzpts</strong> (<em>list</em>) – XYZ coordinates for polygons</p></li>
<li><p><strong>imn</strong> (<em>list</em>) – Image name</p></li>
<li><p><strong>fileDirectory</strong> (<em>str</em>) – Destination that shapefiles will be written to</p></li>
<li><p><strong>projection</strong> (<em>int/str</em>) – Coordinate projection that the shapefile will exist in. This can either be an ESPG number (expressed as an integer) or a well-known geographical coordinate system (expressed as a string). Well-known geographical coordinate systems are: ‘WGS84’, ‘WGS72’, NAD83’ or ‘EPSG:n’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.writeCalibFile">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">writeCalibFile</code><span class="sig-paren">(</span><em class="sig-param">intrMat</em>, <em class="sig-param">tanDis</em>, <em class="sig-param">radDis</em>, <em class="sig-param">fname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#writeCalibFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.writeCalibFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Write camera calibration data to .txt file, including camera matrix, and 
radial and tangential distortion parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>intrMat</strong> (<em>arr</em>) – Intrinsic camera matrix</p></li>
<li><p><strong>tanDis</strong> (<em>arr</em>) – Tangential distortion parameters</p></li>
<li><p><strong>radDis</strong> (<em>arr</em>) – Radial distortion parameters</p></li>
<li><p><strong>fname</strong> (<em>str</em>) – Directory to write file to</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.writeHomogFile">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">writeHomogFile</code><span class="sig-paren">(</span><em class="sig-param">homog</em>, <em class="sig-param">imn</em>, <em class="sig-param">fname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#writeHomogFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.writeHomogFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to write all homography data from a given timeLapse sequence to 
.csv file. Data is formatted as sequential columns containing the following 
information: Image pair 1 name, Image pair 2 name, Homography matrix (i.e. 
all values in the 3x3 matrix), Number of features tracked, X mean 
displacement, Y mean displacement, X standard deviation, Y standard 
deviation, Mean error magnitude, Mean homographic displacement, and 
Signal-to-noise ratio.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>homog</strong> (<em>list</em>) – Homography [mtx, im0pts, im1pts, ptserr, homogerr]</p></li>
<li><p><strong>imn</strong> (<em>list</em>) – List of image names</p></li>
<li><p><strong>fname</strong> (<em>str</em>) – Directory for file to be written to</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.writeLineCoords">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">writeLineCoords</code><span class="sig-paren">(</span><em class="sig-param">uvpts</em>, <em class="sig-param">xyzpts</em>, <em class="sig-param">imn</em>, <em class="sig-param">pxdestination</em>, <em class="sig-param">xyzdestination</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#writeLineCoords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.writeLineCoords" title="Permalink to this definition">¶</a></dt>
<dd><p>Write UV and XYZ line coordinates to text file. These file types are 
compatible with the importing tools (importLinePX, importLineXYZ)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uvpts</strong> (<em>list</em>) – Pixel coordinates</p></li>
<li><p><strong>xyzpts</strong> (<em>list</em>) – XYZ coordinates</p></li>
<li><p><strong>imn</strong> (<em>list</em>) – Image names</p></li>
<li><p><strong>pxdestination</strong> (<em>str</em>) – File directory where UV coordinates will be written to</p></li>
<li><p><strong>xyzdestination</strong> (<em>str</em>) – File directory where XYZ coordinates will be written to</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.writeLineFile">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">writeLineFile</code><span class="sig-paren">(</span><em class="sig-param">pxline</em>, <em class="sig-param">xyzline</em>, <em class="sig-param">imn</em>, <em class="sig-param">destination</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#writeLineFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.writeLineFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Write UV and XYZ line lengths to csv file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pxline</strong> (<em>list</em>) – Pixel line lengths</p></li>
<li><p><strong>xyzline</strong> (<em>list</em>) – XYZ line lengths</p></li>
<li><p><strong>imn</strong> (<em>list</em>) – Image names</p></li>
<li><p><strong>destination</strong> (<em>str</em>) – File directory where output will be written to</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.writeLineSHP">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">writeLineSHP</code><span class="sig-paren">(</span><em class="sig-param">xyzpts</em>, <em class="sig-param">imn</em>, <em class="sig-param">fileDirectory</em>, <em class="sig-param">projection=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#writeLineSHP"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.writeLineSHP" title="Permalink to this definition">¶</a></dt>
<dd><p>Write OGR real line features (from ALL images) to file in a .shp
file type that is compatible with ESRI mapping software.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xyzpts</strong> (<em>list</em>) – XYZ coordinates for polygons</p></li>
<li><p><strong>imn</strong> (<em>list</em>) – Image name</p></li>
<li><p><strong>fileDirectory</strong> (<em>str</em>) – Destination that shapefiles will be written to</p></li>
<li><p><strong>projection</strong> (<em>int/str</em>) – Coordinate projection that the shapefile will exist in. This can either be an ESPG number (expressed as an integer) or a well-known geographical coordinate system (expressed as a string). Well-known geographical coordinate systems are: ‘WGS84’, ‘WGS72’, NAD83’ or ‘EPSG:n’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.writeVeloFile">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">writeVeloFile</code><span class="sig-paren">(</span><em class="sig-param">xyzvel</em>, <em class="sig-param">uvvel</em>, <em class="sig-param">homog</em>, <em class="sig-param">imn</em>, <em class="sig-param">fname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#writeVeloFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.writeVeloFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to write all velocity data from a given timeLapse sequence to 
.csv file. Data is formatted as sequential columns containing the following
information: Image pair 1 name, Image pair 2 name, Average xyz velocity,
Number of features tracked, Average pixel velocity, Homography residual 
mean error (RMS), and Signal-to-noise ratio.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xyzvel</strong> (<em>list</em>) – XYZ velocities</p></li>
<li><p><strong>uvvel</strong> (<em>list</em>) – Pixel velocities</p></li>
<li><p><strong>homog</strong> (<em>list</em>) – Homography [mtx, im0pts, im1pts, ptserr, homogerr]</p></li>
<li><p><strong>imn</strong> – List of image names</p></li>
<li><p><strong>imn</strong> – list</p></li>
<li><p><strong>fname</strong> (<em>str</em>) – Filename for output file. File destination can also specified</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.FileHandler.writeVeloSHP">
<code class="sig-prename descclassname">PyTrx.FileHandler.</code><code class="sig-name descname">writeVeloSHP</code><span class="sig-paren">(</span><em class="sig-param">xyzvel</em>, <em class="sig-param">xyzerr</em>, <em class="sig-param">xyz0</em>, <em class="sig-param">imn</em>, <em class="sig-param">fileDirectory</em>, <em class="sig-param">projection=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/FileHandler.html#writeVeloSHP"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.FileHandler.writeVeloSHP" title="Permalink to this definition">¶</a></dt>
<dd><p>Write OGR real velocity points (from ALL images) to file in a .shp
file type that is compatible with ESRI mapping software.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xyzvel</strong> (<em>list</em>) – XYZ velocities</p></li>
<li><p><strong>xyz0</strong> (<em>list</em>) – XYZ pt0</p></li>
<li><p><strong>imn</strong> (<em>list</em>) – Image name</p></li>
<li><p><strong>fileDirectory</strong> (<em>str</em>) – Destination that shapefiles will be written to</p></li>
<li><p><strong>projection</strong> (<em>int/str</em>) – Coordinate projection that the shapefile will exist in. This can either be an ESPG number (expressed as an integer) or a well-known geographical coordinate system (expressed as a string). Well-known geographical coordinate systems are: ‘WGS84’, ‘WGS72’, NAD83’ or ‘EPSG:n’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-PyTrx.Images">
<span id="pytrx-images-module"></span><h2>PyTrx.Images module<a class="headerlink" href="#module-PyTrx.Images" title="Permalink to this headline">¶</a></h2>
<p>The Images module contains the object-constructors and functions for: (1) 
Importing and handling image data, specifically RBG, one-band (R, B or G), and 
grayscale images; and (2) Handling image sequences (i.e. a set of multiple 
images).</p>
<dl class="class">
<dt id="PyTrx.Images.CamImage">
<em class="property">class </em><code class="sig-prename descclassname">PyTrx.Images.</code><code class="sig-name descname">CamImage</code><span class="sig-paren">(</span><em class="sig-param">imagePath</em>, <em class="sig-param">band='l'</em>, <em class="sig-param">equal=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class representing a raw single band (optical RGB or greyscale). This 
CamImage object is used in subsequent timelapse analysis. The object 
contains the image data, image path, image dimensions and timestamp 
(derived from the image Exif data, if available).       
Optionally the user can specify whether the red, blue or green values 
should be used, or whether the images should be converted to grey scale 
which is the default. No image calibration is undertaken at this point.
The default grayscale band option (‘l’) applies an equalization filter 
on the image whereas the RGB splits are raw RGB. This could be modified 
to permit more sophisticated settings of RGB combinations and/or 
filters with file reading.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imagePath</strong> (<em>str</em>) – The file path to a given image</p></li>
<li><p><strong>band</strong> (<em>str</em>) – Specified image band to pass forward: ‘r’ - red band; ‘b’ - blue band; ‘g’ - green band; and ‘l’ - grayscale. Default to ‘l’</p></li>
<li><p><strong>equal</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag denoting whether histogram equalisation is applied to images (histogram equalisation is applied if True). Default to True</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="PyTrx.Images.CamImage.changeBand">
<code class="sig-name descname">changeBand</code><span class="sig-paren">(</span><em class="sig-param">band</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.changeBand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.changeBand" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the band you want the image to represent (‘r’, ‘b’, ‘g’ or ‘l’)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>band</strong> (<em>str</em>) – Image band (‘r’, ‘b’, ‘g’, or ‘l’)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.CamImage.clearAll">
<code class="sig-name descname">clearAll</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.clearAll"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.clearAll" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear memory of all retained data.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.CamImage.clearImage">
<code class="sig-name descname">clearImage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.clearImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.clearImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear memory of image data.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.CamImage.clearImageArray">
<code class="sig-name descname">clearImageArray</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.clearImageArray"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.clearImageArray" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear memory of image array data.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.CamImage.getExif">
<code class="sig-name descname">getExif</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.getExif"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.getExif" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the exif image size and time stamp data from the image. Image
size is returned as a string (height, width). The time stamp is
returned as a Python datetime object.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.CamImage.getImage">
<code class="sig-name descname">getImage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.getImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.getImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the image.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.CamImage.getImageArray">
<code class="sig-name descname">getImageArray</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.getImageArray"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.getImageArray" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the image as an array.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.CamImage.getImageCorr">
<code class="sig-name descname">getImageCorr</code><span class="sig-paren">(</span><em class="sig-param">cameraMatrix</em>, <em class="sig-param">distortP</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.getImageCorr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.getImageCorr" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the image array that is corrected for the specificied 
camera matrix and distortion parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cameraMatrix</strong> (<em>arr</em>) – Intrinsic camera matrix</p></li>
<li><p><strong>distortP</strong> (<em>arr</em>) – Lens distortion parameters</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Image corrected for image distortion (arr)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.CamImage.getImageEnhance">
<code class="sig-name descname">getImageEnhance</code><span class="sig-paren">(</span><em class="sig-param">diff</em>, <em class="sig-param">phi</em>, <em class="sig-param">theta</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.getImageEnhance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.getImageEnhance" title="Permalink to this definition">¶</a></dt>
<dd><p>Return enhanced image using <code class="xref py py-func docutils literal notranslate"><span class="pre">PyTrx.Images.enhanceImg()</span></code> function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>diff</strong> (<em>str</em>) – Inputted as either ‘light or ‘dark’, signifying the intensity of the image pixels. ‘light’ increases the intensity such that dark pixels become much brighter and bright pixels become slightly brighter. ‘dark’ decreases the intensity such that dark pixels become much darker and bright pixels become slightly darker.</p></li>
<li><p><strong>phi</strong> (<em>int</em>) – Defines the intensity of all pixel values</p></li>
<li><p><strong>theta</strong> (<em>int</em>) – Defines the number of “colours” in the image, e.g. 3 signifies that all the pixels will be grouped into one of three pixel values</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Enhanced image</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.CamImage.getImageName">
<code class="sig-name descname">getImageName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.getImageName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.getImageName" title="Permalink to this definition">¶</a></dt>
<dd><p>Return image name.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.CamImage.getImagePath">
<code class="sig-name descname">getImagePath</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.getImagePath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.getImagePath" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the file path of the image.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.CamImage.getImageSize">
<code class="sig-name descname">getImageSize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.getImageSize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.getImageSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the size of the image (which is obtained from the image Exif 
information).</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.CamImage.getImageTime">
<code class="sig-name descname">getImageTime</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.getImageTime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.getImageTime" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the time of the image (which is obtained from the image Exif
information).</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.CamImage.getImageType">
<code class="sig-name descname">getImageType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.getImageType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.getImageType" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the image file type.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.CamImage.imageGood">
<code class="sig-name descname">imageGood</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.imageGood"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.imageGood" title="Permalink to this definition">¶</a></dt>
<dd><p>Return image file path status.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.CamImage.reportCamImageData">
<code class="sig-name descname">reportCamImageData</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#CamImage.reportCamImageData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.CamImage.reportCamImageData" title="Permalink to this definition">¶</a></dt>
<dd><p>Report image data (file path, image size and datetime).</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="PyTrx.Images.ImageSequence">
<em class="property">class </em><code class="sig-prename descclassname">PyTrx.Images.</code><code class="sig-name descname">ImageSequence</code><span class="sig-paren">(</span><em class="sig-param">imageList</em>, <em class="sig-param">band='L'</em>, <em class="sig-param">equal=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#ImageSequence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.ImageSequence" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class to model a raw collection of CamImage objects, which can 
subsequently be used for making photogrammetric measurements from.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imageList</strong> (<em>str</em>) – The list of images, which can be passed in 3 ways: 1) As a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.Image.CamImage</span></code> objects; 2) As a list of image paths; and 3) As a folder containing images</p></li>
<li><p><strong>band</strong> (<em>str</em><em>, </em><em>optional</em>) – Image band (‘r’, ‘b’, ‘g’, or ‘l’), default to ‘l’</p></li>
<li><p><strong>equal</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag denoting whether histogram equalisation is applied to images (histogram equalisation is applied if True). Default to True</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="PyTrx.Images.ImageSequence.getImageArrNo">
<code class="sig-name descname">getImageArrNo</code><span class="sig-paren">(</span><em class="sig-param">i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#ImageSequence.getImageArrNo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.ImageSequence.getImageArrNo" title="Permalink to this definition">¶</a></dt>
<dd><p>Get image array i from image sequence</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>i</strong> (<em>int</em>) – Image number in sequence</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Image array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.ImageSequence.getImageFileList">
<code class="sig-name descname">getImageFileList</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#ImageSequence.getImageFileList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.ImageSequence.getImageFileList" title="Permalink to this definition">¶</a></dt>
<dd><p>Return list of image file paths.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.ImageSequence.getImageNames">
<code class="sig-name descname">getImageNames</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#ImageSequence.getImageNames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.ImageSequence.getImageNames" title="Permalink to this definition">¶</a></dt>
<dd><p>Return list of image file names.</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.ImageSequence.getImageObj">
<code class="sig-name descname">getImageObj</code><span class="sig-paren">(</span><em class="sig-param">i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#ImageSequence.getImageObj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.ImageSequence.getImageObj" title="Permalink to this definition">¶</a></dt>
<dd><p>Get <a class="reference internal" href="#PyTrx.Images.CamImage" title="PyTrx.Images.CamImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.Images.CamImage</span></code></a> object i from image sequence</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>i</strong> (<em>int</em>) – Image number in sequence</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#PyTrx.Images.CamImage" title="PyTrx.Images.CamImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.Images.CamImage</span></code></a></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.ImageSequence.getImages">
<code class="sig-name descname">getImages</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#ImageSequence.getImages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.ImageSequence.getImages" title="Permalink to this definition">¶</a></dt>
<dd><p>Return image set (i.e. a sequence of CamImage objects).</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Images.ImageSequence.getLength">
<code class="sig-name descname">getLength</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#ImageSequence.getLength"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.ImageSequence.getLength" title="Permalink to this definition">¶</a></dt>
<dd><p>Return length of image set.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="PyTrx.Images.enhanceImage">
<code class="sig-prename descclassname">PyTrx.Images.</code><code class="sig-name descname">enhanceImage</code><span class="sig-paren">(</span><em class="sig-param">img</em>, <em class="sig-param">diff</em>, <em class="sig-param">phi</em>, <em class="sig-param">theta</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Images.html#enhanceImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Images.enhanceImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Change brightness and contrast of image using phi and theta variables. 
Change phi and theta values accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>arr</em>) – Input image array for enhancement</p></li>
<li><p><strong>diff</strong> (<em>str</em>) – Inputted as either ‘light or ‘dark’, signifying the intensity of the image pixels. ‘light’ increases the intensity such that dark pixels become much brighter and bright pixels become slightly brighter. ‘dark’ decreases the intensity such that dark pixels become much darker and bright pixels become slightly darker.</p></li>
<li><p><strong>phi</strong> (<em>int</em>) – Defines the intensity of all pixel values</p></li>
<li><p><strong>theta</strong> (<em>int               .</em>) – Defines the number of “colours” in the image, e.g. 3 signifies that all the pixels will be grouped into one of three pixel values</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Enhanced image.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-PyTrx.Line">
<span id="pytrx-line-module"></span><h2>PyTrx.Line module<a class="headerlink" href="#module-PyTrx.Line" title="Permalink to this headline">¶</a></h2>
<p>The Line module handles the functionality for obtaining line measurements from 
oblique time-lapse imagery. Specifically, this module contains functions for:
(1) Performing manual detection of lines in oblique imagery; and (2) 
Determining real-world distances from oblique imagery.</p>
<dl class="class">
<dt id="PyTrx.Line.Line">
<em class="property">class </em><code class="sig-prename descclassname">PyTrx.Line.</code><code class="sig-name descname">Line</code><span class="sig-paren">(</span><em class="sig-param">imageList</em>, <em class="sig-param">cameraenv</em>, <em class="sig-param">hmatrix</em>, <em class="sig-param">calibFlag=True</em>, <em class="sig-param">band='L'</em>, <em class="sig-param">equal=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Line.html#Line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Line.Line" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Images.ImageSequence</span></code></p>
<p>A class for handling lines/distances (e.g. glacier terminus position)
through an image sequence, with methods to manually define pixel lines in 
the image plane and georectify them to generate real-world coordinates and 
distances. The Line class object primarily inherits from the Area class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imageList</strong> (<em>str/list</em>) – List of images to be inputted into the <a class="reference internal" href="#PyTrx.Images.ImageSequence" title="PyTrx.Images.ImageSequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.Images.ImageSequence</span></code></a> object</p></li>
<li><p><strong>cameraenv</strong> (<em>str</em>) – Camera environment parameters which can be read into the <a class="reference internal" href="#PyTrx.CamEnv.CamEnv" title="PyTrx.CamEnv.CamEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.CamEnv.CamEnv</span></code></a> object as a text file</p></li>
<li><p><strong>hmatrix</strong> (<em>arr</em>) – Homography matrix</p></li>
<li><p><strong>calibFlag</strong> (<em>bool</em><em>, </em><em>optional         .</em>) – An indicator of whether images are calibrated, for the <a class="reference internal" href="#PyTrx.Images.ImageSequence" title="PyTrx.Images.ImageSequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.Images.ImageSequence</span></code></a> object, default to True</p></li>
<li><p><strong>band</strong> (<em>str</em><em>, </em><em>optional           .</em>) – String denoting the desired image band, default to ‘L’ (grayscale)</p></li>
<li><p><strong>equal</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag denoting whether histogram equalisation is applied to images (histogram equalisation is applied if True). Default to True.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="PyTrx.Line.Line.calcManualLines">
<code class="sig-name descname">calcManualLines</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Line.html#Line.calcManualLines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Line.Line.calcManualLines" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to manually define pixel lines from an image sequence. The 
lines are manually defined by the user on an image plot. Returns the 
line pixel coordinates and pixel length.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>XYZ and UV line lengths and coordinates</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="PyTrx.Line.calcManualLine">
<code class="sig-prename descclassname">PyTrx.Line.</code><code class="sig-name descname">calcManualLine</code><span class="sig-paren">(</span><em class="sig-param">img</em>, <em class="sig-param">imn</em>, <em class="sig-param">hmatrix=None</em>, <em class="sig-param">invprojvars=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Line.html#calcManualLine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Line.calcManualLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Manually define a line in a given image to produce XYZ and UV line 
length and corresponding coordinates. Lines are defined through user input 
by clicking in the interactive image plot. This primarily operates via the 
pyplot.ginput function which allows users to define coordinates through 
plot interaction. If inverse projection variables are given, XYZ lines
and coordinates are also calculated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>arr</em>) – Image array for plotting.</p></li>
<li><p><strong>imn</strong> (<em>str</em>) – Image name</p></li>
<li><p><strong>hmatrix</strong> (<em>arr</em><em>, </em><em>optional</em>) – Homography matrix, default to None</p></li>
<li><p><strong>invprojvars</strong> (<em>list</em><em>, </em><em>optional</em>) – Inverse projection variables [X,Y,Z,uv0], default to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Four list elements containing: line length in xyz (list), xyz coordinates of lines (list), line length in pixels (list), and uvcoordinates of lines (list)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Line.getOGRLine">
<code class="sig-prename descclassname">PyTrx.Line.</code><code class="sig-name descname">getOGRLine</code><span class="sig-paren">(</span><em class="sig-param">pts</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Line.html#getOGRLine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Line.getOGRLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to construct an OGR line from a set of uv coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pts</strong> (<em>arr</em>) – A series of uv coordinates denoting a line</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A line object (ogr.Geometry) constructed from the input coordinates</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ogr.Geometry</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-PyTrx.Utilities">
<span id="pytrx-utilities-module"></span><h2>PyTrx.Utilities module<a class="headerlink" href="#module-PyTrx.Utilities" title="Permalink to this headline">¶</a></h2>
<p>The Utilities module contains stand-alone functions needed for simple 
plotting and interpolation. These merely serve as examples and it is highly 
encouraged to adapt these functions for visualising datasets.</p>
<dl class="function">
<dt id="PyTrx.Utilities.arrowplot">
<code class="sig-prename descclassname">PyTrx.Utilities.</code><code class="sig-name descname">arrowplot</code><span class="sig-paren">(</span><em class="sig-param">xst</em>, <em class="sig-param">yst</em>, <em class="sig-param">xend</em>, <em class="sig-param">yend</em>, <em class="sig-param">scale=1.0</em>, <em class="sig-param">headangle=15</em>, <em class="sig-param">headscale=0.2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Utilities.html#arrowplot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Utilities.arrowplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot arrows to denote the direction and magnitude of the displacement. 
Direction is indicated by the bearing of the arrow, and the magnitude is 
indicated by the length of the arrow.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x0</strong> (<em>arr</em>) – X coordinates for pt0</p></li>
<li><p><strong>y0</strong> (<em>arr</em>) – Y coordinates for pt0</p></li>
<li><p><strong>x1</strong> (<em>arr</em>) – X coordinates for pt1</p></li>
<li><p><strong>y1</strong> (<em>arr</em>) – Y coordinates for pt1</p></li>
<li><p><strong>scale</strong> (<em>int</em><em>, </em><em>optional</em>) – Arrow scale, defaults to 1.0</p></li>
<li><p><strong>headangle</strong> (<em>int</em><em>, </em><em>optional</em>) – Plotting angle, defaults to 15</p></li>
<li><p><strong>headscale</strong> (<em>int</em><em>, </em><em>optional</em>) – Arrow head scale, defaults to 0.2</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Arrow plots as two arrays denoting x and y coordinates</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Utilities.interpolateHelper">
<code class="sig-prename descclassname">PyTrx.Utilities.</code><code class="sig-name descname">interpolateHelper</code><span class="sig-paren">(</span><em class="sig-param">xyzvel</em>, <em class="sig-param">xyz0</em>, <em class="sig-param">xyz1</em>, <em class="sig-param">method='linear'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Utilities.html#interpolateHelper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Utilities.interpolateHelper" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to interpolate a point dataset. This uses functions of 
the SciPy package to set up a grid (grid) and then interpolate using a
linear interpolation method (griddata). Methods are those compatible with 
SciPy’s interpolate.griddata function: ‘nearest’, ‘cubic’ and ‘linear’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xxyzvel</strong> – Input xyz velocities</p></li>
<li><p><strong>xyz0</strong> (<em>arr</em>) – Coordinates (x,y) for points in first image</p></li>
<li><p><strong>xyz1</strong> (<em>arr</em>) – Coordinates (x,y) for points in second image</p></li>
<li><p><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – Interpolation method, defaults to ‘linear’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An interpolated grid of points and grid extent</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Utilities.plotAreaPX">
<code class="sig-prename descclassname">PyTrx.Utilities.</code><code class="sig-name descname">plotAreaPX</code><span class="sig-paren">(</span><em class="sig-param">uv</em>, <em class="sig-param">img</em>, <em class="sig-param">show=True</em>, <em class="sig-param">save=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Utilities.html#plotAreaPX"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Utilities.plotAreaPX" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot figure with image overlayed with pixel area features.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uv</strong> (<em>arr</em>) – Input uv coordinates for plotting over image</p></li>
<li><p><strong>img</strong> (<em>arr</em>) – Image array</p></li>
<li><p><strong>show</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag to denote whether the figure is shown, defatuls to True</p></li>
<li><p><strong>save</strong> (<em>str</em><em>, </em><em>optional</em>) – Destination file to save figure to, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A figure with plotted area measurements overlaid onto a given image</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Utilities.plotAreaXYZ">
<code class="sig-prename descclassname">PyTrx.Utilities.</code><code class="sig-name descname">plotAreaXYZ</code><span class="sig-paren">(</span><em class="sig-param">xyz</em>, <em class="sig-param">dem</em>, <em class="sig-param">show=True</em>, <em class="sig-param">save=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Utilities.html#plotAreaXYZ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Utilities.plotAreaXYZ" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot figure with image overlayed with xyz coordinates representing 
either areas or line features.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xyz</strong> (<em>arr</em>) – Input xyz coordinates for plotting</p></li>
<li><p><strong>dem</strong> (<a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a>) – Underlying DEM for plotting over</p></li>
<li><p><strong>show</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag to denote whether the figure is shown, defatuls to True</p></li>
<li><p><strong>save</strong> (<em>str</em><em>, </em><em>optional</em>) – Destination file to save figure to, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A figure with plotted areas overlaid onto a given DEM</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Utilities.plotCalib">
<code class="sig-prename descclassname">PyTrx.Utilities.</code><code class="sig-name descname">plotCalib</code><span class="sig-paren">(</span><em class="sig-param">matrix</em>, <em class="sig-param">distortion</em>, <em class="sig-param">img</em>, <em class="sig-param">imn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Utilities.html#plotCalib"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Utilities.plotCalib" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to show camera calibration. Two images are plotted, the 
first with the original input image and the second with the calibrated
image. This calibrated image is corrected for distortion using the 
distortion parameters held in the <a class="reference internal" href="#PyTrx.CamEnv.CamCalib" title="PyTrx.CamEnv.CamCalib"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.CamEnv.CamCalib</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>matrix</strong> (<em>arr</em>) – Camera matrix</p></li>
<li><p><strong>distortion</strong> (<em>arr</em>) – Distortion cofficients</p></li>
<li><p><strong>img</strong> (<em>arr</em>) – Image array</p></li>
<li><p><strong>imn</strong> (<em>str</em>) – Image name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A figure of an uncorred image and corrected image</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Utilities.plotGCPs">
<code class="sig-prename descclassname">PyTrx.Utilities.</code><code class="sig-name descname">plotGCPs</code><span class="sig-paren">(</span><em class="sig-param">gcps</em>, <em class="sig-param">img</em>, <em class="sig-param">imn</em>, <em class="sig-param">dem</em>, <em class="sig-param">camloc</em>, <em class="sig-param">extent=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Utilities.html#plotGCPs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Utilities.plotGCPs" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to show the ground control points, on the image and the DEM.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gcps</strong> (<em>arr</em>) – GCPs</p></li>
<li><p><strong>img</strong> (<em>arr</em>) – Image array</p></li>
<li><p><strong>imn</strong> (<em>str</em>) – Image name</p></li>
<li><p><strong>dem</strong> (<em>arr</em>) – <a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a> object</p></li>
<li><p><strong>extent</strong> (<em>list</em><em>, </em><em>optional</em>) – DEM extent indicator, default to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A figure with the plotted uv and xyz GCPs</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Utilities.plotInterpolate">
<code class="sig-prename descclassname">PyTrx.Utilities.</code><code class="sig-name descname">plotInterpolate</code><span class="sig-paren">(</span><em class="sig-param">grid</em>, <em class="sig-param">pointextent</em>, <em class="sig-param">dem</em>, <em class="sig-param">show=True</em>, <em class="sig-param">save=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Utilities.html#plotInterpolate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Utilities.plotInterpolate" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to plot the results of the velocity interpolation process for 
a particular image pair.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grid</strong> (<em>arr</em>) – Numpy grid. It is recommended that this is constructed using the interpolateHelper function</p></li>
<li><p><strong>pointextent</strong> (<em>list</em>) – Grid extent</p></li>
<li><p><strong>dem</strong> (<a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a>) – Underlying DEM for plotting over</p></li>
<li><p><strong>show</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag to denote whether the figure is shown, defatuls to True</p></li>
<li><p><strong>save</strong> (<em>str</em><em>, </em><em>optional</em>) – Destination file to save figure to, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A figure with interpolated velocity results overlaid onto a given DEM</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Utilities.plotLinePX">
<code class="sig-prename descclassname">PyTrx.Utilities.</code><code class="sig-name descname">plotLinePX</code><span class="sig-paren">(</span><em class="sig-param">uv</em>, <em class="sig-param">img</em>, <em class="sig-param">show=True</em>, <em class="sig-param">save=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Utilities.html#plotLinePX"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Utilities.plotLinePX" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot figure with image overlayed with pixel line features.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uv</strong> (<em>arr</em>) – Input uv coordinates for plotting over image</p></li>
<li><p><strong>img</strong> (<em>arr</em>) – Image array</p></li>
<li><p><strong>show</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag to denote whether the figure is shown, defatuls to True</p></li>
<li><p><strong>save</strong> (<em>str</em><em>, </em><em>optional</em>) – Destination file to save figure to, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A figure with plotted line measurements overlaid onto a given image</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Utilities.plotLineXYZ">
<code class="sig-prename descclassname">PyTrx.Utilities.</code><code class="sig-name descname">plotLineXYZ</code><span class="sig-paren">(</span><em class="sig-param">xyz</em>, <em class="sig-param">dem</em>, <em class="sig-param">show=True</em>, <em class="sig-param">save=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Utilities.html#plotLineXYZ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Utilities.plotLineXYZ" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot figure with image overlayed with xyz coordinates representing 
either areas or line features.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xyz</strong> (<em>arr</em>) – Input xyz coordinates for plotting</p></li>
<li><p><strong>dem</strong> (<a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a>) – Underlying DEM for plotting over</p></li>
<li><p><strong>show</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag to denote whether the figure is shown, defatuls to True</p></li>
<li><p><strong>save</strong> (<em>str</em><em>, </em><em>optional</em>) – Destination file to save figure to, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A figure with plotted lines overlaid onto a given DEM</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Utilities.plotPrincipalPoint">
<code class="sig-prename descclassname">PyTrx.Utilities.</code><code class="sig-name descname">plotPrincipalPoint</code><span class="sig-paren">(</span><em class="sig-param">camcen</em>, <em class="sig-param">img</em>, <em class="sig-param">imn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Utilities.html#plotPrincipalPoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Utilities.plotPrincipalPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to show the principal point on the image, along with the 
GCPs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>camcen</strong> (<em>list</em>) – Principal point coordinates</p></li>
<li><p><strong>img</strong> (<em>arr</em>) – Image array</p></li>
<li><p><strong>imn</strong> (<em>str</em>) – Image name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A figure with the prinicipal point plotted onto the image</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Utilities.plotResiduals">
<code class="sig-prename descclassname">PyTrx.Utilities.</code><code class="sig-name descname">plotResiduals</code><span class="sig-paren">(</span><em class="sig-param">img</em>, <em class="sig-param">ims</em>, <em class="sig-param">gcp1</em>, <em class="sig-param">gcp2</em>, <em class="sig-param">gcp3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Utilities.html#plotResiduals"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Utilities.plotResiduals" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to plot sets of points to show offsets. This is 
commonly used for inspecting differences between image GCPs and projected 
GCPs, e.g. within the optimiseCamera function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>arr</em>) – Image array</p></li>
<li><p><strong>ims</strong> (<em>list</em>) – Image dimension (height, width)</p></li>
<li><p><strong>gcp1</strong> (<em>arr</em>) – Array with uv positions of image gcps</p></li>
<li><p><strong>gcp2</strong> (<em>arr</em>) – Array with initial uv positions of projected gcps</p></li>
<li><p><strong>gcp3</strong> (<em>arr</em>) – Array with optimised uv positions of projected gcps</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A figure of an image, plotted with uv gcps, initial projected gcps, and optimised gcps</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Utilities.plotVeloPX">
<code class="sig-prename descclassname">PyTrx.Utilities.</code><code class="sig-name descname">plotVeloPX</code><span class="sig-paren">(</span><em class="sig-param">uvvel</em>, <em class="sig-param">uv0</em>, <em class="sig-param">uv1</em>, <em class="sig-param">img</em>, <em class="sig-param">show=True</em>, <em class="sig-param">save=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Utilities.html#plotVeloPX"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Utilities.plotVeloPX" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot figure with image overlayed with pixel velocities. UV data are
depicted as the uv point in img0 and the corresponding pixel velocity as a 
proportional arrow (computed using the arrowplot function).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uvvel</strong> (<em>arr</em>) – Input pixel velocities</p></li>
<li><p><strong>uv0</strong> (<em>arr</em>) – Coordinates (u,v) for points in first image</p></li>
<li><p><strong>uv1</strong> (<em>arr</em>) – Coordinates (u,v) for points in second image</p></li>
<li><p><strong>img</strong> (<em>arr</em>) – Image array</p></li>
<li><p><strong>show</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag to denote whether the figure is shown, defatuls to True</p></li>
<li><p><strong>save</strong> (<em>str</em><em>, </em><em>optional</em>) – Destination file to save figure to, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A figure with plotted point velocities overlaid onto a given image</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Utilities.plotVeloXYZ">
<code class="sig-prename descclassname">PyTrx.Utilities.</code><code class="sig-name descname">plotVeloXYZ</code><span class="sig-paren">(</span><em class="sig-param">xyzvel</em>, <em class="sig-param">xyz0</em>, <em class="sig-param">xyz1</em>, <em class="sig-param">dem</em>, <em class="sig-param">show=True</em>, <em class="sig-param">save=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Utilities.html#plotVeloXYZ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Utilities.plotVeloXYZ" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot figure with image overlayed with xyz velocities. XYZ data are
depicted as the xyz point in img0 and the corresponding velocity as a 
proportional arrow (computed using the arrowplot function).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xyzvel</strong> (<em>arr</em>) – Input xyz velocities</p></li>
<li><p><strong>xyz0</strong> (<em>arr</em>) – Coordinates (x,y) for points in first image</p></li>
<li><p><strong>xyz1</strong> (<em>arr</em>) – Coordinates (x,y) for points in second image</p></li>
<li><p><strong>dem</strong> (<a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a>) – Underlying DEM for plotting over</p></li>
<li><p><strong>show</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag to denote whether the figure is shown, defatuls to True</p></li>
<li><p><strong>save</strong> (<em>str</em><em>, </em><em>optional</em>) – Destination file to save figure to, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A figure with plotted points denoting velocities, overlaid onto a given DEM</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-PyTrx.Velocity">
<span id="pytrx-velocity-module"></span><h2>PyTrx.Velocity module<a class="headerlink" href="#module-PyTrx.Velocity" title="Permalink to this headline">¶</a></h2>
<p>The Velocity module handles the functionality for obtaining velocity and 
homography measurements from oblique time-lapse imagery. Specifically, this 
module contains functions for: (1) Performing camera registration from static 
point feature tracking (referred to here as homography); and (2) Calculating 
surface velocities derived from feature tracking, with associated errors and 
signal-to-noise ratio calculated. These functions can be performed with either
a sparse or dense method, using corner features for tracking in the sparse
method and a grid of evenly space points in the dense method.</p>
<dl class="class">
<dt id="PyTrx.Velocity.Homography">
<em class="property">class </em><code class="sig-prename descclassname">PyTrx.Velocity.</code><code class="sig-name descname">Homography</code><span class="sig-paren">(</span><em class="sig-param">imageList</em>, <em class="sig-param">camEnv</em>, <em class="sig-param">invmaskPath=None</em>, <em class="sig-param">calibFlag=True</em>, <em class="sig-param">band='L'</em>, <em class="sig-param">equal=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#Homography"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.Homography" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Images.ImageSequence</span></code></p>
<p>A class for the processing the homography of an image sequence to 
determine motion in a camera platform. This class treats the images as a 
contigous sequence of name references by default.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imageList</strong> (<em>list</em>) – List of images, for the ImageSet object</p></li>
<li><p><strong>camEnv</strong> (<a class="reference internal" href="#PyTrx.CamEnv.CamEnv" title="PyTrx.CamEnv.CamEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.CamEnv.CamEnv</span></code></a>) – The Camera Environment corresponding to the images, for the <a class="reference internal" href="#PyTrx.Images.ImageSequence" title="PyTrx.Images.ImageSequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.Images.ImageSequence</span></code></a> object</p></li>
<li><p><strong>invmaskPath</strong> (<em>arr</em><em>, </em><em>optional</em>) – The mask for the stationary feature tracking (for camera registration/determining camera homography), default to None</p></li>
<li><p><strong>calibFlag</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag denoting whether images should be corrected for lens distortion, default to True</p></li>
<li><p><strong>band</strong> (<em>str</em><em>, </em><em>optional</em>) – String denoting the desired image band, default to ‘L’ (grayscale)</p></li>
<li><p><strong>equal</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag denoting whether histogram equalisation is applied to images (histogram equalisation is applied if True); default is True.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="PyTrx.Velocity.Homography.calcHomographies">
<code class="sig-name descname">calcHomographies</code><span class="sig-paren">(</span><em class="sig-param">params</em>, <em class="sig-param">homogmethod=8</em>, <em class="sig-param">ransacReprojThreshold=5.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#Homography.calcHomographies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.Homography.calcHomographies" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to generate a homography model through a sequence of 
images, and perform for image registration. Points that are assumed 
to be static in the image plane are tracked between image pairs, and 
movement in these points are used to generate sequential homography 
models.
Input example:
For sparse homographies:
homog = Homography.calcHomographies([[‘sparse’], [50000, 0.1, 5], 
[(25,25), 1.0, 4]])       
For dense homographies:
homog = Homography.calcHomographies([[‘dense’], [100,100], 
[cv2.TM_CCORR_NORMED, 50, 100, 1.0, 4]])</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<em>list</em>) – List that defines the parameters for point matching: Method: ‘sparse’ or ‘dense’ (str). Seed parameters: either containing the cornerparameters for the sparse method - max. number of corners (int), quality (int), and min. distance (int). Or the grid spacing (list) for the dense method. Tracking parameters: either containing the sparse method parameters - window size (tuple), backtracking threshold(int) and minimum tracked features (int). Or the dense method parameters - tracking method (int), template size (int), search window size (int), backtracking threshold (int), and minimum tracked features (int)</p></li>
<li><p><strong>homogmethod</strong> (<em>int</em><em>, </em><em>optional</em>) – Method used to calculate homography model, which plugs into the OpenCV function. This can either be cv2.RANSAC (a RANSAC-based robust method), cv2.LEAST_MEDIAN (a Least-Median robust method) or ‘0’ (a regular method using all the points); default to cv2.RANSAC</p></li>
<li><p><strong>ransacReprojThreshold</strong> (<em>int</em>) – Maximum allowed reprojection error, default to 5.0</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of homography information for all image pairs in sequence</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Velocity.Homography.getInverseMask">
<code class="sig-name descname">getInverseMask</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#Homography.getInverseMask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.Homography.getInverseMask" title="Permalink to this definition">¶</a></dt>
<dd><p>Return inverse mask.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="PyTrx.Velocity.Velocity">
<em class="property">class </em><code class="sig-prename descclassname">PyTrx.Velocity.</code><code class="sig-name descname">Velocity</code><span class="sig-paren">(</span><em class="sig-param">imageList</em>, <em class="sig-param">camEnv</em>, <em class="sig-param">homography=None</em>, <em class="sig-param">maskPath=None</em>, <em class="sig-param">calibFlag=True</em>, <em class="sig-param">band='L'</em>, <em class="sig-param">equal=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#Velocity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.Velocity" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Images.ImageSequence</span></code></p>
<p>A class for the processing of an ImageSet to determine pixel 
displacements and real-world velocities from a sparse set of points, with 
methods to track in the xy image plane and project tracks to real-world 
(xyz) coordinates. This class treats the images as a contigous sequence of 
name references by default.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imageList</strong> (<em>list</em>) – List of images, for the <a class="reference internal" href="#PyTrx.Images.ImageSequence" title="PyTrx.Images.ImageSequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.Images.ImageSequence</span></code></a> object</p></li>
<li><p><strong>camEnv</strong> (<a class="reference internal" href="#PyTrx.CamEnv.CamEnv" title="PyTrx.CamEnv.CamEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.CamEnv.CamEnv</span></code></a>) – The Camera Environment object, <a class="reference internal" href="#PyTrx.CamEnv.CamEnv" title="PyTrx.CamEnv.CamEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.CamEnv.CamEnv</span></code></a> corresponding to the images</p></li>
<li><p><strong>homography</strong> (<em>list</em><em>, </em><em>optional</em>) – Homography model for the corresponding image, defaults to None</p></li>
<li><p><strong>maskPath</strong> (<em>str</em><em>, </em><em>optional</em>) – The file path for the mask indicating the target area for deriving velocities from. If this file exists, the mask will be loaded. If this file does not exist, then the mask generation process will load, and the result will be saved with this path; default to None</p></li>
<li><p><strong>calibFlag</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag denoting whether images should be corrected for lens distortion, default to True</p></li>
<li><p><strong>band</strong> (<em>str</em><em>, </em><em>optional</em>) – String denoting the desired image band, default to ‘L’ (grayscale)</p></li>
<li><p><strong>equal</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag denoting whether histogram equalisation is applied to images (histogram equalisation is applied if True); default is True.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="PyTrx.Velocity.Velocity.calcVelocities">
<code class="sig-name descname">calcVelocities</code><span class="sig-paren">(</span><em class="sig-param">params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#Velocity.calcVelocities"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.Velocity.calcVelocities" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to calculate velocities between succesive image pairs. 
Image pairs are called from the ImageSequence object. Points are seeded
in the first of these pairs using the Shi-Tomasi algorithm with 
OpenCV’s goodFeaturesToTrack function.         
The Lucas Kanade optical flow algorithm is applied using the OpenCV 
function calcOpticalFlowPyrLK to find these tracked points in the 
second image of each image pair. A backward tracking method then tracks 
back from these to the first image in the pair, checking if this is 
within a certain distance as a validation measure.        
Tracked points are corrected for image distortion and camera platform
motion (if needed). The points in each image pair are georectified 
subsequently to obtain xyz points. The georectification functions are 
called from the Camera Environment object, and are based on those in
ImGRAFT (Messerli and Grinsted, 2015). Velocities are finally derived 
from these using a simple Pythagoras’ theorem method.
This function returns the xyz velocities and points from each image 
pair, and their corresponding uv velocities and points in the image 
plane.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>params</strong> (<em>str</em>) – List that defines the parameters for deriving velocity: Method: ‘sparse’ or ‘dense’ (str). Seed parameters: either containing the corner parameters for the sparse method - max. number of corners (int), quality (int), and min. distance (int). Or the grid spacing (list) for the dense method. Tracking parameters: either containing the sparse method parameters - window size (tuple), backtracking threshold (int) and minimum tracked features (int). Or the dense method parameters - tracking method (int), template size (int), search window size (int), correlation threshold (int), and minimum tracked features (int)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A ist containing the xyz and uv velocities. The first element holds the xyz velocity for each point (xyz[0]), the xyz positions for the points in the first image (xyz[1]), and the xyz positions for the points in the second image(xyz[2]). The second element contains the uv velocities for each point (uv[0], the uv positions for the points in the first image (uv[1]), the uv positions for the points in the second image (uv[2]), and the corrected uv points in the second image if they have been calculated using the homography model for image registration (uv[3]). If the corrected points have not beencalculated then an empty list is merely returned</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Velocity.Velocity.getCamEnv">
<code class="sig-name descname">getCamEnv</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#Velocity.getCamEnv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.Velocity.getCamEnv" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the camera environment object (CamEnv).</p>
</dd></dl>

<dl class="method">
<dt id="PyTrx.Velocity.Velocity.getMask">
<code class="sig-name descname">getMask</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#Velocity.getMask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.Velocity.getMask" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the image mask.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="PyTrx.Velocity.apply_persp_homographyPts">
<code class="sig-prename descclassname">PyTrx.Velocity.</code><code class="sig-name descname">apply_persp_homographyPts</code><span class="sig-paren">(</span><em class="sig-param">pts</em>, <em class="sig-param">homog</em>, <em class="sig-param">inverse=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#apply_persp_homographyPts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.apply_persp_homographyPts" title="Permalink to this definition">¶</a></dt>
<dd><p>Funtion to apply a perspective homography to a sequence of 2D 
values held in X and Y. The perspective homography is represented as a 
3 X 3 matrix (homog). The source points are inputted as an array. The 
homography perspective matrix is modelled in the same manner as done so 
in OpenCV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pts</strong> (<em>arr/list</em>) – Input point positions to correct</p></li>
<li><p><strong>homog</strong> (<em>arr</em>) – Perspective homography matrix</p></li>
<li><p><strong>inverse</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag to denote if perspective homography matrix needs inversing, default to False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>corrected point positions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Velocity.calcDenseHomography">
<code class="sig-prename descclassname">PyTrx.Velocity.</code><code class="sig-name descname">calcDenseHomography</code><span class="sig-paren">(</span><em class="sig-param">img1</em>, <em class="sig-param">img2</em>, <em class="sig-param">mask</em>, <em class="sig-param">correct</em>, <em class="sig-param">griddistance</em>, <em class="sig-param">templatesize</em>, <em class="sig-param">searchsize</em>, <em class="sig-param">dem</em>, <em class="sig-param">projvars</em>, <em class="sig-param">trackmethod=3</em>, <em class="sig-param">homogmethod=8</em>, <em class="sig-param">ransacReprojThreshold=5.0</em>, <em class="sig-param">threshold=0.8</em>, <em class="sig-param">min_features=4</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#calcDenseHomography"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.calcDenseHomography" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to supplement correction for movement in the camera 
platform given an image pair (i.e. image registration). Returns the 
homography representing tracked image movement, and the tracked 
features from each image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img1</strong> (<em>arr</em>) – Image 1 in the image pair</p></li>
<li><p><strong>img2</strong> (<em>arr</em>) – Image 2 in the image pair</p></li>
<li><p><strong>mask</strong> (<em>arr</em>) – Mask array for image points to be seeded</p></li>
<li><p><strong>correct</strong> (<em>list</em>) – Calibration parameters for correcting image for lens distortion</p></li>
<li><p><strong>griddistance</strong> (<em>list</em>) – Grid spacing, defined by two values representing pixel row and column spacing</p></li>
<li><p><strong>templatesize</strong> (<em>int</em>) – Template window size in im0 for matching</p></li>
<li><p><strong>searchsize</strong> (<em>int</em>) – Search window size in im1 for matching</p></li>
<li><p><strong>dem</strong> (<em>arr</em>) – <a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a> object</p></li>
<li><p><strong>projvars</strong> (<em>list</em>) – List containing projection parameters (camera location, camera position, radial distortion coefficients, tangential distortion coefficients, focal length, camera centre, and reference image)</p></li>
<li><p><strong>trackmethod</strong> (<em>int</em>) – (str/int): Method for tmeplate matching: cv2.TM_CCOEFF - Cross-coefficient; cv2.TM_CCOEFF_NORMED - Normalised cross-coeff; cv2.TM_CCORR - Cross correlation; cv2.TM_CCORR_NORMED - Normalised cross-corr; cv2.TM_SQDIFF - Square difference; cv2.TM_SQDIFF_NORMED - Normalised square diff</p></li>
<li><p><strong>homogmethod</strong> (<em>int</em><em>, </em><em>optional</em>) – Method used to calculate homography model: cv2.RANSAC - RANSAC-based robust method; cv2.LEAST_MEDIAN - Least-Median robust; 0 - a regular method using all the points. Default to None</p></li>
<li><p><strong>ransacReprojThreshold</strong> (<em>int</em><em>, </em><em>optional</em>) – default to 5.0</p></li>
<li><p><strong>theshold</strong> – Threshold for template correlation; default to 0.8</p></li>
<li><p><strong>min_features</strong> (<em>int</em><em>, </em><em>optional</em>) – Minimum number of seeded points to track, default to 4</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>homogMatrix (arr) - The calculated homographic shift for the image pair; src_pts_corr (arr) - original homography points; dst_pts_corr (arr) -  tracked homography points; homog_pts (arr) -back-tracked homography points;  ptserror (list) - Difference between the original homography points and the back-tracked points; homogerror (list) -Difference between the interpolated homography matrix and the equivalent tracked points</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr/list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Velocity.calcDenseVelocity">
<code class="sig-prename descclassname">PyTrx.Velocity.</code><code class="sig-name descname">calcDenseVelocity</code><span class="sig-paren">(</span><em class="sig-param">im0</em>, <em class="sig-param">im1</em>, <em class="sig-param">griddistance</em>, <em class="sig-param">method</em>, <em class="sig-param">templatesize</em>, <em class="sig-param">searchsize</em>, <em class="sig-param">mask</em>, <em class="sig-param">calib=None</em>, <em class="sig-param">homog=None</em>, <em class="sig-param">campars=None</em>, <em class="sig-param">threshold=0.8</em>, <em class="sig-param">min_features=4</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#calcDenseVelocity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.calcDenseVelocity" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to calculate the velocity between a pair of images using 
a gridded template matching approach. Gridded points are defined by grid 
distance, which are then used to either generate templates for matching
or tracked using the Lucas Kanade optical flow algorithm.    
Tracked points are corrected for image distortion and camera platform
motion (if needed). The points in the image pair are georectified 
subsequently to obtain xyz points.  The georectification functions are 
called from the Camera Environment object, and are based on those in
ImGRAFT (Messerli and Grinsted, 2015). Velocities are finally derived
from these using a simple Pythagoras’ theorem method. This function returns 
the xyz velocities and points, and their corresponding uv velocities and 
points in the image plane.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im0</strong> (<em>arr</em>) – Image 1 in the image pair</p></li>
<li><p><strong>im1</strong> (<em>arr</em>) – Image 2 in the image pair</p></li>
<li><p><strong>griddistance</strong> (<em>list</em>) – Grid spacing, defined by two values representing pixel row and column spacing.</p></li>
<li><p><strong>method</strong> (<em>int</em>) – (str/int): Method for tmeplate matching: cv2.TM_CCOEFF - Cross-coefficient; cv2.TM_CCOEFF_NORMED - Normalised cross-coeff; cv2.TM_CCORR - Cross correlation; cv2.TM_CCORR_NORMED - Normalised cross-corr; cv2.TM_SQDIFF - Square difference; cv2.TM_SQDIFF_NORMED - Normalised square diff</p></li>
<li><p><strong>templatesize</strong> (<em>int</em>) – Template window size in im0 for matching</p></li>
<li><p><strong>searchsize</strong> (<em>int</em>) – Search window size in im1 for matching</p></li>
<li><p><strong>mask</strong> (<em>arr</em>) – Mask array for masking DEM</p></li>
<li><p><strong>calib</strong> (<em>list</em><em>, </em><em>optional</em>) – Calibration parameters, default to None</p></li>
<li><p><strong>homog</strong> (<em>list</em><em>, </em><em>optional</em>) – Homography parameters, hmatrix (arr) and hpts (arr), default to None</p></li>
<li><p><strong>campars</strong> – List containing information for transforming between the image plane and 3D scene: 1. DEM (ExplicitRaster object); 2. Projection parameters (camera location, camera position, radial distortion coefficients, tangential distortion coefficients, focal length, camera centre, and reference image); 3. Inverse projection parameters (coordinate system  3D scene - X, Y, Z, uv0). Default to None</p></li>
<li><p><strong>theshold</strong> – Threshold for template correlation; default to 0.8</p></li>
<li><p><strong>min_features</strong> (<em>int</em><em>, </em><em>optional</em>) – Minimum number of seeded points to track, default to 4</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Two lists, 1. containing the xyz velocities for each point (xyz[0]), the xyz positions for the points in the first image (xyz[1]), and the  xyz positions for the points in the second image(xyz[2]); amd 2. containing the uv velocities for each point (uv[0], the uv positions for the points in the first image (uv[1]), the uv positions for the points in the second image (uv[2]), and the corrected uv points in the second image if they have been calculated using the homography model for image registration (uv[3]). If the corrected points have not been calculated then an empty list is merely returned</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Velocity.calcSparseHomography">
<code class="sig-prename descclassname">PyTrx.Velocity.</code><code class="sig-name descname">calcSparseHomography</code><span class="sig-paren">(</span><em class="sig-param">img1, img2, mask, correct, method=8, ransacReprojThreshold=5.0, winsize=(25, 25), back_thresh=1.0, min_features=4, seedparams=[50000, 0.1, 5.0]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#calcSparseHomography"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.calcSparseHomography" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to supplement correction for movement in the camera 
platform given an image pair (i.e. image registration). Returns the 
homography representing tracked image movement, and the tracked 
features from each image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img1</strong> (<em>arr</em>) – Image 1 in the image pair</p></li>
<li><p><strong>img2</strong> (<em>arr</em>) – Image 2 in the image pair</p></li>
<li><p><strong>mask</strong> (<em>arr</em>) – Mask array for image points to be seeded</p></li>
<li><p><strong>correct</strong> (<em>list</em><em>, </em><em>optional</em>) – Calibration parameters for correcting image for lens distortion, default to None</p></li>
<li><p><strong>method</strong> (<em>int</em><em>, </em><em>optional</em>) – Method used to calculate homography model: cv2.RANSAC - RANSAC-based robust method; cv2.LEAST_MEDIAN - Least-Median robust; 0 - a regular method using all the points. Default to None</p></li>
<li><p><strong>ransacReprojThreshold</strong> (<em>int</em><em>, </em><em>optional</em>) – default to 5.0</p></li>
<li><p><strong>winsize</strong> (<em>tuple</em><em>, </em><em>optional</em>) – default to (25, 25)</p></li>
<li><p><strong>back_thesh</strong> – Threshold for back-tracking distance (i.e.the difference between the original seeded point and the back-tracked point in im0); default to 1.0</p></li>
<li><p><strong>min_features</strong> (<em>int</em><em>, </em><em>optional</em>) – Minimum number of seeded points to track, default to 4</p></li>
<li><p><strong>seedparams</strong> (<em>list</em><em>, </em><em>optional</em>) – Point seeding parameters, which indicate whether points are generated based on corner features or a grid with defined spacing. The three corner features parameters denote maximum number of corners detected, corner quality, and minimum distance between corners; inputted as a list. For grid generation, the only input parameter needed is the grid spacing; inputted as a list containing the horizontal and vertical grid spacing. Default to [50000, 0.1, 5.0]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>homogMatrix (arr) - The calculated homographic shift for the image pair; src_pts_corr (arr) - original homography points; dst_pts_corr (arr) - tracked homography points; homog_pts (arr) -back-tracked homography points; ptserror (list) - Difference between the original homography points and the back-tracked points; homogerror (list) -Difference between the interpolated homography matrix and the equivalent tracked points</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr/list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Velocity.calcSparseVelocity">
<code class="sig-prename descclassname">PyTrx.Velocity.</code><code class="sig-name descname">calcSparseVelocity</code><span class="sig-paren">(</span><em class="sig-param">img1, img2, mask, calib=None, homog=None, invprojvars=None, winsize=(25, 25), back_thresh=1.0, min_features=4, seedparams=[50000, 0.1, 5.0]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#calcSparseVelocity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.calcSparseVelocity" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to calculate the velocity between a pair of images. Points 
are seeded in the first of these either by a defined grid spacing, or using 
the Shi-Tomasi algorithm with OpenCV’s goodFeaturesToTrack function.  
The Lucas Kanade optical flow algorithm is applied using the OpenCV 
function calcOpticalFlowPyrLK to find these tracked points in the 
second image. A backward tracking method then tracks back from these to 
the original points, checking if this is within a certain distance as a 
validation measure.
Tracked points are corrected for image distortion and camera platform
motion (if needed). The points in the image pair are georectified 
subsequently to obtain xyz points.  The georectification functions are 
called from the <a class="reference internal" href="#PyTrx.CamEnv.CamEnv" title="PyTrx.CamEnv.CamEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.CamEnv.CamEnv</span></code></a> object, and are based on those 
in ImGRAFT (Messerli and Grinsted, 2015). Velocities are finally derived
from these using a simple Pythagoras’ theorem method. This function returns 
the xyz velocities and points, and their corresponding uv velocities and 
points in the image plane.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img1</strong> (<em>arr</em>) – Image 1 in the image pair</p></li>
<li><p><strong>img2</strong> (<em>arr</em>) – Image 2 in the image pair</p></li>
<li><p><strong>mask</strong> (<em>arr</em>) – </p></li>
<li><p><strong>calib</strong> (<em>list</em><em>, </em><em>optional</em>) – default to None</p></li>
<li><p><strong>homog</strong> (<em>list</em><em>, </em><em>optional</em>) – default to None</p></li>
<li><p><strong>invprojvars</strong> (<em>list</em><em>, </em><em>optional</em>) – default to None</p></li>
<li><p><strong>winsize</strong> (<em>tuple</em><em>, </em><em>optional</em>) – default to (25, 25)</p></li>
<li><p><strong>back_thesh</strong> – Threshold for back-tracking distance (i.e.the difference between the original seeded point and the back-tracked point in im0); default to 1.0</p></li>
<li><p><strong>min_features</strong> (<em>int</em><em>, </em><em>optional</em>) – Minimum number of seeded points to track, default to 4</p></li>
<li><p><strong>seedparams</strong> (<em>list</em><em>, </em><em>optional</em>) – Point seeding parameters, which indicate whether points are generated based on corner features or a grid with defined spacing. The three corner features parameters denote maximum number of corners detected, corner quality, and minimum distance between corners; inputted as a list. For grid generation, the only input parameter needed is the grid spacing; inputted as a list containing the horizontal and vertical grid spacing. Default to [50000, 0.1, 5.0]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Two lists, 1. The xyz velocities for each point (xyz[0]), the xyz positions for the points in the first image (xyz[1]), and the xyz positions for the points in the second image(xyz[2]); 2. The uv velocities for each point (uv[0], the uv positions for the points in the first image (uv[1]), the uv positions for the points in the second image (uv[2]), and the corrected uv points in the second image if they have been calculated using the homography model for image registration (uv[3]). If the corrected points have not been calculated then an empty list is merely returned</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Velocity.opticalMatch">
<code class="sig-prename descclassname">PyTrx.Velocity.</code><code class="sig-name descname">opticalMatch</code><span class="sig-paren">(</span><em class="sig-param">i0</em>, <em class="sig-param">iN</em>, <em class="sig-param">p0</em>, <em class="sig-param">winsize</em>, <em class="sig-param">back_thresh</em>, <em class="sig-param">min_features</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#opticalMatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.opticalMatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to match between two masked images using Optical Flow. The 
Lucas Kanade optical flow algorithm is applied using the OpenCV function 
calcOpticalFlowPyrLK to find these tracked points in the second image. A 
backward tracking then tracks back from these to the original points, 
checking if this is within a given number of pixels as a validation 
measure. The resulting error is the difference between the original feature 
point and the backtracked feature point.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i0</strong> (<em>arr</em>) – Image 1 in the image pair</p></li>
<li><p><strong>iN</strong> (<em>arr</em>) – Image 2 in the image pair</p></li>
<li><p><strong>winsize</strong> (<em>tuple</em>) – Window size for tracking e.g. (25,25)</p></li>
<li><p><strong>back_thesh</strong> – Threshold for back-tracking distance (i.e. the difference between the original seeded point and the back-tracked point in im0)</p></li>
<li><p><strong>min_features</strong> (<em>int</em>) – Minimum number of seeded points to track</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Point coordinates for points tracked to image 2 (arr), Point coordinates for points back-tracked from image 2 to image 1 (arr), and SNR measurements for the corresponding tracked point. The signal is the magnitude of the displacement from p0 to p1, and the noise is the magnitude of the displacement from p0r to p0 (arr)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Velocity.readDEMmask">
<code class="sig-prename descclassname">PyTrx.Velocity.</code><code class="sig-name descname">readDEMmask</code><span class="sig-paren">(</span><em class="sig-param">dem</em>, <em class="sig-param">img</em>, <em class="sig-param">invprojvars</em>, <em class="sig-param">demMaskPath=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#readDEMmask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.readDEMmask" title="Permalink to this definition">¶</a></dt>
<dd><p>Read/generate DEM mask for subsequent grid generation. If a valid 
filename is given then the DEM mask is loaded from file. If the filename
does not exist, then the mask is defined. To define the DEM mask, a mask is
first defined in the image plane (using point and click, facilitated 
through Matplotlib Pyplot’s ginput function), and then projected to the 
DEM scene using CamEnv’s projectXYZ function. For the projection to work,
the invprojvars need to be valid X,Y,Z,uv0 parameters, as generated in 
CamEnv’s setProjection function. The mask is saved to file if a filepath is
given. This DEM mask can be used for dense feature-tracking/template 
matching, where masked regions of the DEM are reassigned to 
NaN using Numpy’s ma.mask function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dem</strong> (<em>arr</em>) – <a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a> DEM object</p></li>
<li><p><strong>img</strong> (<em>arr</em>) – Image to initially define mask in</p></li>
<li><p><strong>invprojvars</strong> (<em>list</em>) – Inverse projection variables [X,Y,Z,uv0]</p></li>
<li><p><strong>demMaskPath</strong> (<em>str</em><em>, </em><em>optional</em>) – File path to outputted mask file, default to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Boolean visibility matrix (which is the same dimensions as the dem)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Velocity.seedCorners">
<code class="sig-prename descclassname">PyTrx.Velocity.</code><code class="sig-name descname">seedCorners</code><span class="sig-paren">(</span><em class="sig-param">im</em>, <em class="sig-param">mask</em>, <em class="sig-param">maxpoints</em>, <em class="sig-param">quality</em>, <em class="sig-param">mindist</em>, <em class="sig-param">min_features</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#seedCorners"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.seedCorners" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to seed corner features using the Shi-Tomasi corner feature 
detection method in OpenCV’s goodFeaturesToTrack function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>arr</em>) – Image for seeding corner points</p></li>
<li><p><strong>mask</strong> (<em>arr</em>) – Mask array for points to be seeded</p></li>
<li><p><strong>maxpoints</strong> (<em>int</em>) – Maximum number of corners detected</p></li>
<li><p><strong>quality</strong> (<em>int</em>) – Corner quality (between 0.0 and 1.0)</p></li>
<li><p><strong>mindist</strong> (<em>int</em>) – Minimum distance between corners</p></li>
<li><p><strong>min_features</strong> (<em>int</em>) – Minimum number of seeded points to track</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Point coordinates for corner features seeded in image</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Velocity.seedGrid">
<code class="sig-prename descclassname">PyTrx.Velocity.</code><code class="sig-name descname">seedGrid</code><span class="sig-paren">(</span><em class="sig-param">dem</em>, <em class="sig-param">griddistance</em>, <em class="sig-param">projvars</em>, <em class="sig-param">mask</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#seedGrid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.seedGrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Define pixel grid at a specified grid distance, taking into 
consideration the image size and image mask.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dem</strong> (<em>arr</em>) – <a class="reference internal" href="#PyTrx.DEM.ExplicitRaster" title="PyTrx.DEM.ExplicitRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyTrx.DEM.ExplicitRaster</span></code></a> DEM object</p></li>
<li><p><strong>griddistance</strong> (<em>list</em>) – Grid spacing, defined by two values representing pixel row and column spacing.</p></li>
<li><p><strong>projvars</strong> (<em>list</em>) – Projection parameters (camera location, camera position, radial distortion coefficients, tangential distortion coefficients, focal length, camera centre, and reference image)</p></li>
<li><p><strong>mask</strong> (<em>arr</em>) – Mask array for masking DEM</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Two arrays containing the grid point positions in the DEM coordinate system (arr), and the grid point positions in the image coordinate system (arr)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="PyTrx.Velocity.templateMatch">
<code class="sig-prename descclassname">PyTrx.Velocity.</code><code class="sig-name descname">templateMatch</code><span class="sig-paren">(</span><em class="sig-param">im0</em>, <em class="sig-param">im1</em>, <em class="sig-param">uv0</em>, <em class="sig-param">templatesize</em>, <em class="sig-param">searchsize</em>, <em class="sig-param">threshold=0.8</em>, <em class="sig-param">min_features=4</em>, <em class="sig-param">method=3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/PyTrx/Velocity.html#templateMatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PyTrx.Velocity.templateMatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to template match between two images. Templates in the first
image (im0) are generated from a given set of points (uv0) and matched to 
the search window in image 2 (im1). There are a series of methods that can
be used for matching, in adherence with those offered with OpenCV’s 
matchTemplate function. After matching, the origin point of each matched 
template in image 2 is returned, along with the average correlation in 
each template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>im0</strong> (<em>arr</em>) – Image 1 in the image pair</p></li>
<li><p><strong>im1</strong> (<em>arr</em>) – Image 2 in the image pair</p></li>
<li><p><strong>uv0</strong> (<em>tuple</em>) – Grid points for image 1</p></li>
<li><p><strong>templatesize</strong> (<em>int</em>) – Template window size in im0 for matching</p></li>
<li><p><strong>searchsize</strong> (<em>int</em>) – Search window size in im1 for matching</p></li>
<li><p><strong>min_features</strong> (<em>int</em><em>, </em><em>optional</em>) – Minimum number of seeded points to track, default to 4</p></li>
<li><p><strong>method</strong> (<em>int</em>) – (str/int): Method for tmeplate matching: cv2.TM_CCOEFF - Cross-coefficient; cv2.TM_CCOEFF_NORMED - Normalised cross-coeff; cv2.TM_CCORR - Cross correlation; cv2.TM_CCORR_NORMED - Normalised cross-corr; cv2.TM_SQDIFF - Square difference; cv2.TM_SQDIFF_NORMED - Normalised square diff</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Point coordinates for points tracked to image 2 (arr), Point coordinates for points back-tracked from image 2 to image 1 (arr), and SNR measurements for the corresponding tracked point where the signal is the magnitude of the displacement from p0 to p1, and the noise is the magnitude of the displacement from p0r to p0 (arr)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arr</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">PyTrx modules</a><ul>
<li><a class="reference internal" href="#module-PyTrx.Area">PyTrx.Area module</a></li>
<li><a class="reference internal" href="#module-PyTrx.CamEnv">PyTrx.CamEnv module</a></li>
<li><a class="reference internal" href="#module-PyTrx.DEM">PyTrx.DEM module</a></li>
<li><a class="reference internal" href="#module-PyTrx.FileHandler">PyTrx.FileHandler module</a></li>
<li><a class="reference internal" href="#module-PyTrx.Images">PyTrx.Images module</a></li>
<li><a class="reference internal" href="#module-PyTrx.Line">PyTrx.Line module</a></li>
<li><a class="reference internal" href="#module-PyTrx.Utilities">PyTrx.Utilities module</a></li>
<li><a class="reference internal" href="#module-PyTrx.Velocity">PyTrx.Velocity module</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Examples.html"
                        title="previous chapter">PyTrx Examples</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Links.html"
                        title="next chapter">Links and Acknowledgements</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/Modules.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Links.html" title="Links and Acknowledgements"
             >next</a> |</li>
        <li class="right" >
          <a href="Examples.html" title="PyTrx Examples"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyTrx 1.1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Penelope How, Nick Hulton, Lynne Buie.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0.
    </div>
  </body>
</html>